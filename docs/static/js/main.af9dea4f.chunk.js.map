{"version":3,"sources":["res/sprite-sheet.png","game/engine/Images.js","game/engine/math/PointMath.js","GraphicsHelper.js","game/engine/GameObject.js","game/engine/TiledLevelBuilder.js","KeyBinding.js","game/State.js","game/engine/input/MouseInput.js","game/Explosion.js","game/engine/physics/RayCast.js","game/Bullet.js","game/UIPanels.js","game/Level.js","game/Player.js","game/FieldOfVison.js","game/engine/FPSView.js","game/Ammo.js","game/MiniMap.js","game/engine/debug/CacheView.js","components/Canvas.js","game/index.js","components/LevelEdit.js","components/Routes.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","spriteSheet","cache","degreesToRadians","angleInDegrees","Math","PI","angleBetween","x1","y1","x2","y2","atan2","SPRITE_WIDTH","SPRITE_HEIGHT","load","imagePath","Promise","resolve","reject","Image","onload","callback","document","createElement","width","height","context","getContext","imageSmoothingEnabled","drawImage","save","translate","restore","rotate","cacheImages","onerror","src","drawStoneFloorOn","x","y","explosionIndeces","getCache","ONE_RADIAN","HEIGHT","window","innerHeight","WIDTH","innerWidth","GameScreen","center","GraphicsHelper","canvases","windowWidth","windowHeight","this","layers","layer","setupCanvases","numberOfCanvases","Object","keys","length","i","text","color","font","fillStyle","fillText","layerName","alpha","globalAlpha","radius","beginPath","arc","fill","stroke","xa","ya","xb","yb","strokeStyle","moveTo","lineTo","angle","w","h","rect","size","drawRect","image","drawPlayerOn","drawBulletOn","drawBadgeOn","drawSkullOn","drawAmmoOn","frame","drawExplosionOn","BASE_PARENT","offsetX","offsetY","name","GameObject","localX","localY","parent","children","graphics","start","forEach","child","startLoop","delta","update","updateLoop","render","renderLoop","gameObject","push","_","remove","go","addChild","removeChild","tileFunctions","TILE_SIZE","drawTilesOn","tiles","row","tileIndex","xPosition","yPosition","keyBinding","value","key","isDown","isUp","press","undefined","release","downHandler","event","preventDefault","upHandler","downListener","bind","upListener","addEventListener","unsubscribe","removeEventListener","GameState","map","TileSet","player","direction","ammo","otherPlayers","xOffset","yOffset","playerPosition","mapTiles","tileSize","tileAt","floor","xDiff","yDiff","yIndex","state","xIndex","instance","clickHandlers","init","handleMouseMove","handleClick","addClickHandler","onmousemove","pageX","pageY","handler","clientX","clientY","Explosion","frameIndex","frameCount","drawExplosion","bresenhamLine","x0","y0","isSteep","abs","temp","deltaX","deltaY","yStep","points","error","STEP","oneEighty","Bullet","targetX","targetY","prevX","prevY","distance","target","maxDistance","speed","destroy","spawn","centerX","centerY","s","sin","c","cos","rotatePoint","startX","startY","endX","endY","tileFromScreenSpace","simpleRaycast","drawBullet","PanelHeight","UIPanels","rendered","setLayer","wKey","aKey","sKey","dKey","Level","handleMouseClick","cachedBackground","canvas","mapWidth","defaultTiles","mapHeight","screenHeight","screenWidth","cacheLevel","MouseInput","handleKeyboardInput","xMove","yMove","playerTile","updatePlayerPosition","bulletXPos","bulletYPos","drawBackground","xMovement","yMovement","PLAYER_STATES","BYSTANDER","MAFIA","DETECTIVE","Player","midpoint","values","random","drawText","drawPlayer","drawSkull","drawBadge","VIEW_OFFSET","FieldOfVison","fovDistance","lookX","lookY","input","setTransparency","FPSView","fps","setInterval","rKey","Ammo","drawAmmo","MiniMap","dotSize","renderMiniMap","drawSprite","tileMap","mapImage","CacheView","Canvas","lastFrameTime","loop","game","root","fpsView","uiPanels","time","deltaTime","g","requestAnimationFrame","default","refs","defaultCanvas","fov","fovCanvas","players","playerCanvas","ui","uiCanvas","e","spritesheet","then","ref","onClick","Component","LevelEdit","images","currentBrush","handlePaint","updateBrush","saveMap","renderTiles","fn","newCanvas","tilesize","className","onclick","indexOf","pallet","appendChild","index","setState","levelCanvas","offsetLeft","offsetTop","tileWidth","offsetWidth","xCoord","yCoord","console","log","style","position","Routes","props","path","App","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.af9dea4f.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import { degreesToRadians } from \"./math/PointMath\"\n\nlet spriteSheet, cache\n\nexport const SPRITE_WIDTH = 40\nexport const SPRITE_HEIGHT = 40\n\nexport function load(imagePath){\n  return new Promise((resolve, reject) => {\n    spriteSheet = new Image()\n    spriteSheet.onload = () => cacheImages(spriteSheet, resolve)\n    spriteSheet.onerror = reject\n    spriteSheet.src = imagePath\n  })\n}\n\n/**\n * Caches and scales the spritesheet file\n * \n * @param {Image} spriteSheet \n * @param {function} callback \n */\nfunction cacheImages(spriteSheet, callback) {\n  cache = document.createElement('canvas');\n  cache.width = 460\n  cache.height = 80\n  const context = cache.getContext('2d')\n  context.imageSmoothingEnabled = false\n  // cache the player\n  context.drawImage(spriteSheet, 0,0,20,20, 0,0,40,40)\n\n  // cache the floor\n  context.save()\n  context.translate(40,0)\n  context.drawImage(spriteSheet, 20,0,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache the bullet\n  context.save()\n  context.translate(80, 0)\n  context.drawImage(spriteSheet, 80,0,20,20, 0,0,20,20)\n  context.restore()\n  // cache the horizontal wall\n  context.save()\n  context.translate(100,0)\n  context.drawImage(spriteSheet, 40,0,20,20, 0,0,40,40)\n  context.restore()\n\n  // cache the vertical wall\n  context.save()\n  context.translate(180,0) //need to double the width when rotating, real position is 140\n  context.rotate(degreesToRadians(90))\n  context.drawImage(spriteSheet, 40,0,20,20, 0,0,40,40)\n  context.restore()\n\n  // //cache the angeled wall corners\n\n  context.save()\n  context.translate(180,0)\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  context.save()\n  context.translate(260,0) //actual 220\n  context.rotate(degreesToRadians(90))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  context.save()\n  context.translate(260,40)\n  context.rotate(degreesToRadians(-90))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n  \n  context.save()\n  context.translate(340,40)\n  context.rotate(degreesToRadians(180))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache the skull\n  context.save()\n  context.translate(80,20)\n  context.drawImage(spriteSheet, 0,20,20,20, 0,0,20,20)\n  context.restore()\n\n  //cache the badge\n  context.save()\n  context.translate(340,0)\n  context.drawImage(spriteSheet, 20,20,20,20, 0,0,20,20)\n  context.restore()\n\n  //cache ammo\n  context.save()\n  context.translate(360,0)\n  context.drawImage(spriteSheet, 40,20,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache first explosion frame\n\n  context.save()\n  context.translate(400,0)\n  context.drawImage(spriteSheet, 60,20,20,20, 0,0,20,20)\n  context.restore()\n\n    //cache second explosion frame\n\n    context.save()\n    context.translate(400,20)\n    context.drawImage(spriteSheet, 80,20,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache third explosion frame\n\n    context.save()\n    context.translate(420,0)\n    context.drawImage(spriteSheet, 0,40,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache fourth explosion frame\n\n    context.save()\n    context.translate(420,20)\n    context.drawImage(spriteSheet, 20,40,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache fifth explosion frame\n\n    context.save()\n    context.translate(440,0)\n    context.drawImage(spriteSheet, 40,40,20,20, 0,0,20,20)\n    context.restore()\n\n  callback(cache)\n}\n\nexport function drawPlayerOn(context, x, y) {\n  context.drawImage(cache, 0,0,SPRITE_WIDTH,SPRITE_HEIGHT, x, y,SPRITE_WIDTH,SPRITE_HEIGHT)\n}\n\nexport function drawStoneFloorOn(context, x, y) {\n  context.drawImage(cache, 40,0,40,40, x, y,40,40)\n}\n\nexport function drawBulletOn(context, x, y) {\n  context.drawImage(cache, 80,0,20,20, x, y, 20,20)\n}\n\nexport function drawSkullOn(context, x, y) {\n  context.drawImage(cache, 80,20,20,20, x, y, 20,20)\n}\n\nexport function drawBadgeOn(context, x, y) {\n  context.drawImage(cache, 340,0,20,20, x, y, 20,20)\n}\n\nexport function drawHorizontalWallOn(context, x, y) {\n  context.drawImage(cache, 100,0,40,40, x, y, 40,40)\n}\n\nexport function drawVerticalWallOn(context, x, y) {\n  context.drawImage(cache, 140,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled1WallOn(context, x, y) {\n  context.drawImage(cache, 180,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled2WallOn(context, x, y) {\n  context.drawImage(cache, 220,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled3WallOn(context, x, y) {\n  context.drawImage(cache, 260,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled4WallOn(context, x, y) {\n  context.drawImage(cache, 300,0,40,40, x, y, 40,40)\n}\n\nexport function drawAmmoOn(context, x, y) {\n  context.drawImage(cache, 360,0,40,40, x, y, 40,40)\n}\n\nconst explosionIndeces = [\n  {x:400, y:0},\n  {x:400, y:20},\n  {x:420, y:0},\n  {x:420, y:20},\n  {x:440, y:0},\n]\n\nexport function drawExplosionOn(context, x, y, frame){\n  context.drawImage(cache, explosionIndeces[frame].x, explosionIndeces[frame].y, 20, 20,  x, y, 20, 20)\n}\n\nexport function getCache(){\n  return cache\n}\n","export function degreesToRadians(angleInDegrees){\n  return angleInDegrees * Math.PI / 180\n}\n\nexport function radiansToDegrees(radians){\n  return radians * 180 / Math.PI\n}\n\nexport function rotatePoint(centerX, centerY, x, y, angle) {\n  const s = Math.sin(angle);\n  const c = Math.cos(angle);\n\n  // translate point back to origin:\n  x -= centerX;\n  y -= centerY;\n\n  const xnew =  x * c + -y * s;\n  const ynew =  x * s + y * c;\n\n  // translate point back:\n  return [xnew + centerX, ynew + centerY]\n}\n\n/**\n * Returns the angle, in radians, between the line made by the 4 coordinate parameters and \n * a vertical line pointing upwards starting at the first coordinates. This angle will be within the range 0 & +-180\n * \n * @param {number} x1 the x coordinate of the first point\n * @param {number} y1 the y coordinate of the first point\n * @param {number} x2 the x coordinate of the second point\n * @param {number} y2 the y coordinate of the second point\n * @returns {number} the angle in radians\n */\nexport function angleBetween(x1, y1, x2, y2){\n  return Math.atan2(x2 - x1, (y2 - y1) * -1 );\n}\n","import { drawStoneFloorOn, drawPlayerOn, drawBulletOn, drawBadgeOn, drawSkullOn, drawAmmoOn, drawExplosionOn } from \"./game/engine/Images\";\n\nconst ONE_RADIAN = 2 * Math.PI;\nconst HEIGHT = window.innerHeight\nconst WIDTH = window.innerWidth\n\nexport const GameScreen = {\n    height: HEIGHT,\n    width: WIDTH,\n    center: {x: WIDTH/2, y:HEIGHT/2},\n}\n\nexport class GraphicsHelper {\n\n    constructor(canvases, windowWidth, windowHeight){   \n        this.layers = canvases\n        this.windowHeight = windowHeight\n        this.windowWidth = windowWidth\n        this.layer = 'default'\n        this.setupCanvases(canvases)\n    }\n\n    setupCanvases(canvases){\n        const numberOfCanvases = Object.keys(canvases).length\n        for (let i = 0; i < numberOfCanvases; i++) {\n            this.getContext(Object.keys(canvases)[i]).imageSmoothingEnabled = false\n        }\n    }\n\n    getContext(){\n        return this.layers[this.layer].getContext(\"2d\")\n    }\n\n    drawText(x, y, text, color = \"white\", font = \"30px Arial\"){\n        this.getContext().fillStyle = color;\n        this.getContext().font = font;\n        this.getContext().fillText(text, x, y);\n    }\n\n    setLayer(layerName){\n        this.layer = layerName\n    }\n\n    setTransparency(alpha){\n        this.getContext().globalAlpha = alpha\n    }\n\n    drawCircle(x, y, radius, color){\n        this.getContext().fillStyle = color;\n        this.getContext().beginPath();\n        this.getContext().arc(x, y, radius, 0, ONE_RADIAN);\n        this.getContext().fill();\n        this.getContext().stroke();\n    }\n\n    drawLine(xa, ya, xb, yb, color){\n        this.getContext().strokeStyle = color;\n        this.getContext().beginPath();\n        this.getContext().moveTo(xa, ya);\n        this.getContext().lineTo(xb, yb);\n        this.getContext().stroke(); \n    }\n    \n    rotate(angle){\n        this.getContext().rotate(angle)\n    }\n    \n    restore(){\n        this.getContext().restore()\n        this.layer = 'default'\n    }\n\n    save(){\n        this.getContext().save()\n    }\n\n    translate(x, y){\n        this.getContext().translate(x, y)\n    }\n\n    drawRect(x, y, w, h, color){\n        this.getContext().fillStyle = color;\n        this.getContext().beginPath();\n        this.getContext().rect(x, y, w, h)\n        this.getContext().fill();\n    }\n\n    drawSquare(x, y, size, color){\n        this.drawRect(x, y, size, size, color)\n    }\n\n    drawSprite(image, x, y, width, height){\n        this.getContext().drawImage(image, x, y, width, height)\n    }\n\n    drawBackground(image, x = 0, y = 0){\n        this.getContext().drawImage(image, x, y)\n    }\n\n    drawPlayer(x, y){\n        drawPlayerOn(this.getContext(), x, y)\n    }\n\n    drawBullet(x, y){\n        drawBulletOn(this.getContext(), x, y)\n    }\n\n    drawBadge(x, y){\n        drawBadgeOn(this.getContext(), x, y)\n    }\n\n    drawSkull(x, y){\n        drawSkullOn(this.getContext(), x, y)\n    }\n\n    drawAmmo(x, y){\n        drawAmmoOn(this.getContext(), x, y)\n    }\n\n    drawExplosion(x, y, frame){\n        drawExplosionOn(this.getContext(), x, y, frame)\n    }\n}\n\nexport function cacheTiledSprite(rows, columns){\n    const cachCanvas = document.createElement('canvas');\n    cachCanvas.width = 40 * rows\n    cachCanvas.height = 40 * columns\n    const context = cachCanvas.getContext('2d', {alpha: false})\n        for (let row = 0; row < rows; row++) {\n            for (let column = 0; column < columns; column++) {\n                drawStoneFloorOn(context, row * 40, column * 40)\n            }\n        }\n    return cachCanvas\n}\n","import _ from \"lodash\"\n\nconst BASE_PARENT = {\n  offsetX: 0,\n  offsetY: 0,\n  name: 'BASE_PARENT'\n}\n\nexport class GameObject {\n\n  constructor(){\n    this.localX = 0\n    this.localY = 0\n    this.parent = BASE_PARENT;\n    this.children = []\n  }\n\n  get name(){\n    return 'GameObject'\n  }\n \n  /**\n   * This should return the x value of where the object is on the screen\n   * @returns {number} the total x offset of this object and all its parent objects (IE its world position)\n   */\n  get offsetX() {\n    return this.localX + this.parent.offsetX\n  }\n\n  /**\n   * This should return the y value of where the object is on the screen\n   * @returns {number} the total y offset of this object and all its parent objects (IE its world position)\n   */\n  get offsetY() {\n    return this.localY + this.parent.offsetY\n  }\n\n  startLoop(graphics){\n    this.start(graphics)\n    this.children.forEach(child => {\n      child.startLoop(graphics)\n    });\n  }\n\n  updateLoop(delta){\n    this.update(delta)\n    this.children.forEach(child => {\n      child.updateLoop(delta)\n    });\n  }\n\n  renderLoop(graphics, delta){\n    this.render(graphics, delta)\n    this.children.forEach(child => {\n      child.renderLoop(graphics, delta)\n    });\n  }\n\n  addChild(gameObject){\n    gameObject.parent = this\n    this.children.push(gameObject);\n  }\n\n  removeChild(gameObject){\n    _.remove(this.children, go => go === gameObject)\n  }\n\n  spawn(gameObject){\n    this.addChild(gameObject)\n    gameObject.start()\n  }\n\n  /**\n   * All this does is remove the game object from the game heirarchy, stopping it from being\n   * updated/rendered every frame.\n   * This does not guarantee the object is ready for garbage collection.\n   * Make sure to clean up any refernces in your object before destroying to \n   * avoid memory leaks.\n   */\n  destroy(){\n    this.parent.removeChild(this)\n  }\n\n  start(){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {number} delta \n   */\n  update(delta){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {GraphicsHelper} graphics The context from the canvas\n   * @param {number} delta \n   */\n  render(graphics, delta) {\n\n  }\n}\n","import { \n  drawHorizontalWallOn, \n  drawVerticalWallOn, \n  drawAngeled1WallOn, \n  drawAngeled2WallOn , \n  drawAngeled3WallOn , \n  drawAngeled4WallOn,  \n  drawStoneFloorOn\n} from \"./Images\";\n\nimport defaultTiles from \"../maps/default2.json\"\n\n/**\n * 0: floor\n * 1: --\n * 2: |\n * 3: -/\n * 4: \\-\n * 5: _\\\n * 6: /_\n */\nexport const tileFunctions = [\n  drawStoneFloorOn,\n  drawHorizontalWallOn,\n  drawVerticalWallOn,\n  drawAngeled1WallOn,\n  drawAngeled2WallOn,\n  drawAngeled3WallOn,\n  drawAngeled4WallOn,\n]\n\nconst TILE_SIZE = 40\n\nexport function cacheLevel() {\n  let canvas = document.createElement('canvas')\n  let context = canvas.getContext('2d', {alpha: false})\n  const mapWidth = defaultTiles[0].length * TILE_SIZE;\n  const mapHeight = defaultTiles.length * TILE_SIZE;\n  const screenHeight = window.innerHeight\n  const screenWidth = window.innerWidth\n\n  canvas.width = mapWidth + screenWidth\n  canvas.height = mapHeight + screenHeight\n\n  context.fillStyle = \"black\";\n  context.beginPath();\n  context.rect(0, 0, canvas.width, canvas.height)\n  context.fill();\n  context.stroke();\n  context.save()\n  drawTilesOn(context, defaultTiles,  screenWidth, screenHeight)\n  return canvas\n}\n\nexport function drawTilesOn(context, tiles, w, h, size=TILE_SIZE){\n  for (let y = 0; y < tiles.length; y++) {\n    const row = tiles[y];\n    for (let x = 0; x < row.length; x++) {\n      const tileIndex = row[x];\n      const xPosition = x * size + w / 2;\n      const yPosition = y * size + h / 2;\n      drawStoneFloorOn(context, xPosition, yPosition)\n      if(tileIndex > 0)\n        tileFunctions[tileIndex](context, xPosition, yPosition)\n      // drawText(context, xPosition,yPosition, `(${x},${y})` )\n      // drawText(context, xPosition + 10,yPosition + 20, `${tiles[y][x]}` )\n    }\n  }\n}\n\nfunction drawText(context, x, y, text, color = \"white\", font = \"10px Arial\"){\n  context.fillStyle = color;\n  context.font = font;\n  context.fillText(text, x, y);\n}","export function keyBinding(value) {\n    let key = {};\n    key.value = value;\n    key.isDown = false;\n    key.isUp = true;\n    key.press = undefined;\n    key.release = undefined;\n    //The `downHandler`\n    key.downHandler = event => {\n      if (event.key === key.value) {\n        if (key.isUp && key.press) key.press();\n        key.isDown = true;\n        key.isUp = false;\n        event.preventDefault();\n      }\n    };\n  \n    //The `upHandler`\n    key.upHandler = event => {\n      if (event.key === key.value) {\n        if (key.isDown && key.release) key.release();\n        key.isDown = false;\n        key.isUp = true;\n        event.preventDefault();\n      }\n    };\n  \n    //Attach event listeners\n    const downListener = key.downHandler.bind(key);\n    const upListener = key.upHandler.bind(key);\n    \n    window.addEventListener(\n      \"keydown\", downListener, false\n    );\n    window.addEventListener(\n      \"keyup\", upListener, false\n    );\n    \n    // Detach event listeners\n    key.unsubscribe = () => {\n      window.removeEventListener(\"keydown\", downListener);\n      window.removeEventListener(\"keyup\", upListener);\n    };\n    \n    return key;\n  }","import mapTiles from \"./maps/default2.json\"\nimport { GameScreen } from \"../GraphicsHelper.js\"\n\nclass GameState {\n\n  constructor(){\n    this.map = new TileSet()\n    this.player = {\n      x: 20,\n      y: 22,\n      direction: 0,\n      ammo: 6,\n      name: 'Jay Joe'\n    }\n    this.otherPlayers = [\n      {\n        name: 'RagnarRoog',\n        x: 345,\n        y: 1945,\n      }\n    ]\n  }\n\n  updatePlayerPosition(xOffset, yOffset){\n    let [x, y] = this.map.playerPosition(xOffset, yOffset)\n    this.player.x = x\n    this.player.y = y\n  }\n}\n\n/**\n * The tileSize property describes each tile's \n * width and height (40 x 40)\n */\nclass TileSet {\n  constructor(){\n    this.tiles = mapTiles\n    this.tileSize = 40\n  }\n\n  get width(){\n    return this.tiles[0].length\n  }\n\n  get height(){\n    return this.tiles.length\n  }\n\n  tileAt(x, y){\n    return this.tiles[y][x]\n  }\n\n  playerTile(xOffset, yOffset){\n    const [x, y] = this.playerPosition(xOffset, yOffset)\n    return this.tileAt(x, y)\n  }\n\n  playerPosition(xOffset, yOffset){\n    return [Math.floor(-xOffset / this.tileSize), Math.floor(-yOffset / this.tileSize)]\n  }\n\n  tileFromScreenSpace(x, y){\n    let xDiff = Math.floor((GameScreen.center.x - x) / this.tileSize)\n    let yDiff = Math.floor((GameScreen.center.y - y) / this.tileSize)\n\n    const yIndex = state.player.y - yDiff\n    const xIndex = state.player.x - xDiff\n    if(yIndex < 0 || yIndex > this.height || xIndex < 0 ||xIndex > this.width){\n      return -1\n    }\n    return this.tiles[yIndex][xIndex]\n  }\n}\n\n//refactor this\nexport const state = new GameState()\n\nexport default state\n\n","class MouseInput {\n\n    constructor(){\n        this.x = 0\n        this.y = 0\n        this.clickHandlers = []\n        this.init = this.init.bind(this)\n        this.handleMouseMove = this.handleMouseMove.bind(this)\n        this.handleClick = this.handleClick.bind(this);\n        this.addClickHandler = this.addClickHandler.bind(this);\n    }\n\n    init(){\n        document.onmousemove = this.handleMouseMove\n    }\n\n    handleMouseMove(event){\n        this.x = event.pageX\n        this.y = event.pageY\n    }\n\n    handleClick(event){\n        this.clickHandlers.forEach(handler => {\n            handler(event.clientX, event.clientY)\n        })\n    }\n\n    addClickHandler(handler){\n        this.clickHandlers.push(handler)\n    }\n}\n\nconst instance = new MouseInput()\n\nexport default instance\n","import { GameObject } from \"./engine/GameObject\";\n\nexport class Explosion extends GameObject {\n\n    constructor(x, y){\n        super()\n        this.localX = x\n        this.localY = y\n        this.frameIndex = 0\n        this.frameCount = 4\n    }\n    \n    get name(){\n        return 'Explosion'\n    }\n\n    update(delta){\n        if(this.frameIndex >= this.frameCount){\n            this.parent.removeChild(this)\n        }\n        this.frameIndex++\n    }\n\n    render(graphics){\n        graphics.save()\n        graphics.translate(this.offsetX, this.offsetY)\n        graphics.drawExplosion(0,0, this.frameIndex)\n        graphics.restore()\n    }\n}\n","import { state } from \"../../State\"\n\n/**\n * returns all the points on a line between (x0, y0) and (x1, y1)\n * for better performance you can increase the step (defaults to 1)\n * \n * @param {number} x0 \n * @param {number} y0 \n * @param {number} x1 \n * @param {number} y1 \n */\nexport function bresenhamLine(x0, y0, x1, y1){\n    const isSteep = Math.abs(y1, - y0) > Math.abs(x1, x0)\n\n    if(isSteep){\n        let temp = x0\n        x0 = y0\n        y0 = temp\n\n        temp = x1\n        x1 = y1\n        y1 = temp\n    }\n    if(x0 > x1){\n        let temp = x0\n        x0 = x1\n        x1 = temp\n\n        temp = y0\n        y0 = y1\n        y1 = temp\n    }\n\n    const deltaX = x1 - x0,\n        deltaY = Math.abs(y1 - y0),\n        yStep = (y0 < y1) ? 1 : -1,\n        points = []\n\n    let error = 0, y = y0\n\n    for (let x = x0; x <= x1; x++) {\n        isSteep ? points.push([Math.floor(y), Math.floor(x)]) : points.push([Math.floor(x), Math.floor(y)])\n        error += deltaY\n        if(error * 2 >= deltaX){\n            y += yStep\n            error -= deltaX\n        }\n    }\n\n    return points\n}\n\nconst STEP = 1\n\nexport function raycast(startX, startY, endX, endY){\n    let points = bresenhamLine(startX, startY, endX, endY)\n    if(points[0][0] === startX){\n        for (let i = 0; i < points.length; i += STEP) {\n            const [x, y] = points[i];\n            if(state.map.tileFromScreenSpace(x, y) !== 0)\n                return [x, y]\n        }\n    } else {\n        for (let i = points.length - 1; i >= 0; i -= STEP) {\n            const [x, y] = points[i];\n            if(state.map.tileFromScreenSpace(x, y) !== 0)\n                return [x, y]\n        }\n    }\n}\n\nexport function simpleRaycast(startX, startY, endX, endY){\n    let points = bresenhamLine(startX, startY, endX, endY)\n    for (let i = 0; i < points.length; i += STEP) {\n        const [x, y] = points[i];\n        if(state.map.tileFromScreenSpace(x, y) !== 0){\n            return [x, y]\n        }\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { degreesToRadians, rotatePoint } from \"./engine/math/PointMath\";\nimport state from './State'\nimport { Explosion } from \"./Explosion\";\nimport { raycast, simpleRaycast } from \"./engine/physics/RayCast\";\n\nconst oneEighty = degreesToRadians(180)\n\nexport class Bullet extends GameObject {\n\n    constructor(x, y, angle, targetX, targetY){\n        super()\n        this.prevX = x\n        this.prevY = y\n        this.localX = x \n        this.localY = y\n        this.distance = 0\n        this.angle = angle - oneEighty\n        this.target = {x: targetX, y: targetY}\n    }\n\n    get name(){\n        return 'Bullet'\n    }\n\n    start(){\n        state.player.ammo -= 1\n        this.maxDistance = 1000\n        this.size = 6\n        this.speed = 20\n        \n        // let result = raycast(this.offsetX, this.offsetY, this.target.x, this.target.y)\n        // if(result){\n        //     alert(result)\n        // }\n    }\n\n    update(delta){\n        this.distance += this.speed * delta\n        if((this.distance) > this.maxDistance) {\n            this.destroy()\n            this.parent.spawn(new Explosion(this.localX, this.localY))\n            return\n        }\n\n        let [x, y] =  rotatePoint(this.localX, this.localY, this.localX, this.localY + this.speed * delta, this.angle)\n\n        this.prevX = this.offsetX\n        this.prevY = this.offsetY\n\n        this.localX = Math.floor(x)\n        this.localY = Math.floor(y)\n\n        let result = simpleRaycast(this.prevX, this.prevY, this.offsetX, this.offsetY)\n\n        // if(state.map.tileFromScreenSpace(this.offsetX, this.offsetY) !== 0){\n        if(result){\n            this.parent.spawn(new Explosion(this.localX, this.localY))\n            this.destroy()\n        }   \n    }\n\n    render(graphics){\n        graphics.save()\n        graphics.translate(this.offsetX, this.offsetY)\n        graphics.rotate(this.angle + oneEighty)\n        graphics.drawBullet(0, 0)\n        graphics.restore()\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { GameScreen } from \"../GraphicsHelper\";\n\nconst PanelHeight = Math.floor(GameScreen.height * 0.15);\n\nexport class UIPanels extends GameObject {\n\n    start(){\n        this.rendered = false\n    }\n\n    render(graphics){\n        if(!this.rendered){\n            graphics.setLayer('ui')\n            graphics.drawRect(0,0, GameScreen.width, PanelHeight, \"black\")\n            graphics.drawRect(0,GameScreen.height - PanelHeight, GameScreen.width, PanelHeight, \"black\")\n            graphics.restore()\n            this.rendered = true\n        }\n    }\n}","import { GameObject } from \"./engine/GameObject\";\nimport { cacheLevel } from \"./engine/TiledLevelBuilder\";\nimport { keyBinding } from \"../KeyBinding\";\nimport { state } from './State'\nimport MouseInput from \"./engine/input/MouseInput\"\nimport { Bullet } from \"./Bullet\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport { angleBetween, radiansToDegrees } from \"./engine/math/PointMath\";\nimport { UIPanels } from \"./UIPanels\";\n\nconst wKey = keyBinding(\"w\")\nconst aKey = keyBinding(\"a\")\nconst sKey = keyBinding(\"s\")\nconst dKey = keyBinding(\"d\")\n\nexport class Level extends GameObject {\n\n  constructor(){\n    super()\n    this.handleMouseClick = this.handleMouseClick.bind(this);\n  }\n  \n  get name(){\n    return 'Level'\n  }\n\n  start(){\n    this.speed = 5\n    this.cachedBackground = cacheLevel()\n    this.localX = -state.player.x * state.map.tileSize\n    this.localY = -state.player.y * state.map.tileSize\n    MouseInput.addClickHandler(this.handleMouseClick)\n  }\n\n  update(delta){\n    let [xMove, yMove] = this.handleKeyboardInput(delta)\n\n    if(state.map.playerTile(this.offsetX, this.offsetY + yMove) === 0)\n      this.localY += yMove\n    if(state.map.playerTile(this.offsetX + xMove, this.offsetY) === 0)\n      this.localX += xMove\n    state.updatePlayerPosition(this.localX, this.localY)\n  }\n\n  handleMouseClick(x, y){\n    if(state.player.ammo > 0){\n      let bulletXPos = -(this.offsetX - GameScreen.center.x)\n      let bulletYPos = -(this.offsetY - GameScreen.center.y)\n      let angle = angleBetween(GameScreen.center.x, GameScreen.center.y , x, y)\n      this.spawn(new Bullet(bulletXPos, bulletYPos, angle, x, y))\n    }\n  }\n\n  render(graphics){\n    graphics.drawBackground(this.cachedBackground, this.offsetX, this.offsetY)\n    // graphics.drawSprite(this.cachedBackground, 0, 0, GameScreen.width - this.offsetX, GameScreen.height - this.offsetY)\n    // graphics.drawText(0 ,50, `Player: ${[Math.floor(-1* this.offsetX/40), Math.floor(-1* this.offsetY/40)]}`)\n    // graphics.drawText(0 ,80, `Tile: ${state.map.playerTile(this.offsetX, this.offsetY)}`)\n  }\n\n  handleKeyboardInput(delta){\n    let xMovement = 0, yMovement = 0\n    if(wKey.isDown){\n        yMovement += this.speed * delta\n    }\n    if(sKey.isDown){\n        yMovement -= this.speed * delta\n    }\n    if(aKey.isDown){\n        xMovement += this.speed * delta\n    }\n    if(dKey.isDown){\n        xMovement -= this.speed * delta\n    }\n    return [xMovement, yMovement]\n  }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport state from \"./State\";\n\nconst PLAYER_STATES = {\n  BYSTANDER: 'BYSTANDER', //0\n  MAFIA: 'MAFIA',         //1\n  DETECTIVE: 'DETECTIVE', //2\n}\n\nexport class Player extends GameObject {\n\n  constructor(){\n    super()\n    this.width = 40\n    this.midpoint = this.width/2\n    this.state = PLAYER_STATES.BYSTANDER\n  }\n\n  get name(){\n    return 'Player'\n  }\n\n  start(){\n    this.state = Object.values(PLAYER_STATES)[Math.floor(Math.random() * 3)]\n    this.localX = GameScreen.center.x\n    this.localY = GameScreen.center.y\n  }\n\n  render(graphics){\n    graphics.setLayer('players')\n    graphics.drawText(this.offsetX - 50, this.offsetY - 25, state.player.name, \"cyan\", '15px arial')\n    graphics.drawPlayer(Math.floor(this.offsetX - this.midpoint), Math.floor(this.offsetY - this.midpoint))\n    if(this.state === PLAYER_STATES.MAFIA)\n      graphics.drawSkull(Math.floor(this.offsetX + 10), Math.floor(this.offsetY + 10))\n    if(this.state === PLAYER_STATES.DETECTIVE)\n      graphics.drawBadge(Math.floor(this.offsetX + 10), Math.floor(this.offsetY + 10))\n    graphics.restore()\n  }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { angleBetween, degreesToRadians } from \"./engine/math/PointMath\";\nimport input from './engine/input/MouseInput'\nimport {state} from \"./State\"\nimport { GameScreen } from \"../GraphicsHelper\";\n\nconst VIEW_OFFSET = degreesToRadians(140)\n\nexport class FieldOfVison extends GameObject {\n\n  constructor(){\n    super()\n    this.fovDistance = 1000\n  }\n\n  get name(){\n    return 'FieldOfVison'\n  }\n\n  start(){\n    this.localX = GameScreen.center.x\n    this.localY = GameScreen.center.y\n    this.lookX = 0\n    this.lookY = 0\n    this.angle = 0\n  }\n\n  update(delta){\n    this.angle = angleBetween(this.offsetX, this.offsetY, input.x, input.y)\n    state.player.direction = this.angle\n  }\n\n  /*\n  I should try prerendering the rectangles that make up the blinders. then draw every\n  other pixel in them to create a transparent effect. then draw that as an image.\n  or I could make a transparent blinder sprite and just import and use that.\n  */\n\n  render(graphics){    \n    // graphics.save()\n    // graphics.setLayer('fov')\n    graphics.save()\n    graphics.translate(this.offsetX, this.offsetY)\n    graphics.setTransparency(0.8)\n    graphics.rotate(this.angle - VIEW_OFFSET)\n    graphics.drawRect(-graphics.windowWidth, Math.floor(-(graphics.windowWidth * 1.5)/2), graphics.windowWidth, Math.floor(graphics.windowWidth * 1.5), \"black\")\n    graphics.drawRect(-0, -graphics.windowWidth, graphics.windowWidth, graphics.windowWidth, \"black\")\n    graphics.restore()\n  }\n}","import { GameObject } from \"./GameObject\";\n\nexport class FPSView extends GameObject {\n\n  start(){\n    this.localY = 25\n    this.frameCount = 0\n    this.fps = 0\n    this.color = \"white\"\n    setInterval(() => {\n      this.fps = this.frameCount\n      this.frameCount = 0\n    }, 1000)\n  }\n\n  render(graphics){\n    this.frameCount++\n    graphics.setLayer('ui')\n    graphics.drawRect(0, 0, 110, 30, \"black\")\n\n    graphics.drawText(this.offsetX ,this.offsetY, `FPS: ${this.fps}`, this.color)\n    graphics.restore()\n  }\n}","import { GameObject } from \"./engine/GameObject\";\nimport { keyBinding } from \"../KeyBinding\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport state from \"./State\";\n\nconst rKey = keyBinding(\"r\")\n\nexport class Ammo extends GameObject {\n\n    start(){\n        this.localY = GameScreen.height - 75\n        this.localX = 25\n    }\n    \n    update(delta){\n        if(rKey.isDown){\n            state.player.ammo = 6\n        }\n    }\n\n    render(graphics){\n        graphics.setLayer('ui')\n        graphics.setTransparency(0.15)\n        graphics.drawRect(this.offsetX, this.offsetY, 6 * 32, 40, \"black\")\n        graphics.setTransparency(1)\n        for (let i = 0; i < state.player.ammo; i++) {\n            graphics.drawAmmo(this.offsetX + i * 30, this.offsetY)\n        }\n        graphics.restore()\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport state from \"./State\";\nimport { GameScreen } from \"../GraphicsHelper\";\n\nexport class MiniMap extends GameObject {\n\n    constructor(){\n        super()\n        this.dotSize = 2\n    }\n\n    get name(){\n        return 'MiniMap'\n    }\n\n    start(){\n        this.image = this.renderMiniMap()\n        this.localX = GameScreen.width - 125\n        this.localY = GameScreen.height - 125\n    }\n\n    render(graphics){\n        graphics.setLayer('ui')\n        graphics.save()\n        graphics.translate(this.offsetX, this.offsetY)\n        graphics.drawSprite(this.image, 0,0, this.image.width, this.image.height)\n        graphics.drawRect(\n            this.dotSize * state.player.x,\n            this.dotSize * state.player.y,\n            4, 4,\n            \"magenta\"\n        )\n        graphics.restore()\n    }\n\n    renderMiniMap(){\n        const tileMap = state.map\n        const mapImage = document.createElement('canvas')\n        mapImage.width = tileMap.width * this.dotSize\n        mapImage.height = tileMap.height * this.dotSize\n        const context = mapImage.getContext('2d')\n        for (let y = 0; y < tileMap.height; y++) {\n            for (let x = 0; x < tileMap.width; x++) {\n                if(tileMap.tileAt(x, y) === 0){\n                    drawRect(context, x * this.dotSize, y * this.dotSize, this.dotSize, this.dotSize, \"black\")\n                } else {\n                    drawRect(context, x * this.dotSize, y * this.dotSize, this.dotSize, this.dotSize, \"green\")\n                }\n            }\n        }\n        return mapImage\n    }\n}\n\nfunction drawRect(context, x, y, w, h, color) {\n    context.fillStyle = color;\n    context.beginPath();\n    context.rect(x, y, w, h)\n    context.fill();\n}","import { GameObject } from \"../GameObject\";\nimport { getCache } from \"../Images\";\n\nexport class CacheView extends GameObject{\n\n  constructor(){\n    super()\n    this.rendered = false\n  }\n\n  render(graphics){\n    if(!this.rendered){\n      graphics.setLayer('ui')\n      graphics.getContext().drawImage(getCache(), 0, 40)\n      graphics.restore()\n      this.rendered = true\n    }\n  }\n}","import React, {Component} from 'react'\nimport { GraphicsHelper } from '../GraphicsHelper'\nimport { init } from '../game'\nimport MouseInput from '../game/engine/input/MouseInput'\nimport { load } from '../game/engine/Images'\nimport spritesheet from \"../res/sprite-sheet.png\"\n\nconst FRAME_INTERVAL = 1000 / 30 //30 fps\nconst HEIGHT = window.innerHeight\nconst WIDTH = window.innerWidth\n\nexport class Canvas extends Component {\n\n    constructor(){\n        super()\n        this.lastFrameTime = 0\n        this.loop = this.loop.bind(this);\n        this.game = init()\n    }\n\n    loop(time){\n        const elapsedFrameTime = time - this.lastFrameTime;\n        const deltaTime = FRAME_INTERVAL / elapsedFrameTime;\n        this.game.updateLoop(deltaTime)\n        this.game.renderLoop(this.g, deltaTime)\n        this.lastFrameTime = time\n        requestAnimationFrame(this.loop); \n    }\n\n    componentDidMount(){\n        let canvases = {\n            default: this.refs.defaultCanvas, \n            fov: this.refs.fovCanvas,\n            players: this.refs.playerCanvas,\n            ui: this.refs.uiCanvas\n        }\n        this.refs.uiCanvas.addEventListener('contextmenu', e => e.preventDefault())\n        this.g = new GraphicsHelper(canvases, WIDTH, HEIGHT)\n        this.g.drawText(WIDTH/2, HEIGHT/2, \"LOADING...\", \"white\")\n        MouseInput.init()\n        load(spritesheet).then(() => {\n            this.game.startLoop(this.g)\n            requestAnimationFrame(this.loop);\n        })\n    }\n\n    render() { \n        return (\n            <>\n                <canvas ref=\"defaultCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"fovCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"playerCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"uiCanvas\" width={WIDTH} height={HEIGHT} onClick={MouseInput.handleClick}></canvas>\n            </>\n        )\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { Level } from \"./Level\";\nimport { Player } from \"./Player\";\nimport { FieldOfVison } from \"./FieldOfVison\";\nimport { FPSView } from \"./engine/FPSView\";\nimport { Ammo } from \"./Ammo\";\nimport { MiniMap } from \"./MiniMap\";\nimport { UIPanels } from \"./UIPanels\";\n\nimport { CacheView } from \"./engine/debug/CacheView\";\nimport { getCache } from \"./engine/Images\";\n\n\nexport function init(){\n  const root = new GameObject()\n  const player = new Player()\n  const fpsView = new FPSView();\n  const uiPanels = new UIPanels();\n  uiPanels.addChild(fpsView)\n  uiPanels.addChild(new Ammo())\n  uiPanels.addChild(new MiniMap())\n  \n  root.addChild(new Level())\n  root.addChild(new FieldOfVison())\n  root.addChild(player)\n  root.addChild(uiPanels)\n  root.addChild(new CacheView(getCache()))\n  return root\n}\n","import React, {Component} from \"react\"\nimport { drawTilesOn, tileFunctions } from \"../game/engine/TiledLevelBuilder\";\nimport { load } from \"../game/engine/Images\";\nimport spritesheet from \"../res/sprite-sheet.png\"\nimport './styles/LevelEdit.scss'\nimport defaultTiles from \"../game/maps/default2.json\"\nimport {state} from \"../game/State\"\n\nconst CANVAS_WIDTH = 52*40\nconst CANVAS_HEIGHT = 52*40\n\nexport default class LevelEdit extends Component {\n    constructor(){\n        super()\n        this.state = {\n            tiles: defaultTiles,\n            images: [],\n            currentBrush: 1\n        }\n        this.handlePaint = this.handlePaint.bind(this);\n        this.updateBrush = this.updateBrush.bind(this);\n        this.saveMap = this.saveMap.bind(this);\n    }\n\n    componentDidMount(){\n        load(spritesheet).then(() => {\n            this.renderTiles()\n\n            tileFunctions.forEach(fn => {\n                const newCanvas = document.createElement('canvas');\n                newCanvas.width=state.map.tileSize\n                newCanvas.height=state.map.tilesize\n                newCanvas.className='brush'\n                newCanvas.onclick = () => {this.updateBrush(tileFunctions.indexOf(fn))}\n                fn(newCanvas.getContext('2d'), 0, 0)\n                this.refs.pallet.appendChild(newCanvas)\n            })\n        })\n    }\n\n    updateBrush(index){\n        this.setState({...this.state, currentBrush: index})\n    }\n\n    renderTiles(){\n        const canvas = this.refs.levelCanvas;\n        drawTilesOn(canvas.getContext(\"2d\"), this.state.tiles, 0, 0)\n    }\n\n    componentDidUpdate(){\n        this.renderTiles()\n    }\n\n    handlePaint({pageX, pageY}){\n        const {offsetLeft, offsetTop, offsetWidth} = this.refs.levelCanvas;\n        const tileWidth = offsetWidth / 52\n        const xCoord = Math.floor([(pageX - offsetLeft) / tileWidth]);\n        const yCoord = Math.floor([(pageY - offsetTop) / tileWidth]);\n        let tiles = [...this.state.tiles]\n        tiles[yCoord][xCoord] = this.state.currentBrush\n        this.setState({tiles})\n    }\n\n    saveMap(){\n        console.log(this.state.tiles)\n    }\n\n    render(){\n        return(\n            <div className='level-edit-container'>\n            <div ref='pallet' className='pallet'></div>\n                <canvas \n                    onClick={this.handlePaint}\n                    className='level-canvas' \n                    style={{position: 'relative'}} \n                    ref=\"levelCanvas\" width={CANVAS_WIDTH} height={CANVAS_HEIGHT}\n                />\n                <button onClick={this.saveMap}>Save</button>\n            </div>\n        )\n    }\n}\n\n","import React from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n  } from \"react-router-dom\";\nimport { Canvas } from \"./Canvas\";\nimport LevelEdit from \"./LevelEdit\";\n\nconst Routes = (props) => {\n    return(\n        <Router>\n            <Switch>\n                <Route path=\"/level-edit\">\n                    <LevelEdit />\n                </Route>\n                <Route path=\"/\">\n                    <Canvas/>\n                </Route>\n            </Switch>\n        </Router>\n    )\n}\n\nexport default Routes;\n","import React from 'react';\nimport './App.css';\nimport Routes from './components/Routes';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Routes/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}