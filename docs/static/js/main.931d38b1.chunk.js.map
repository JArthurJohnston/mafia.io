{"version":3,"sources":["GraphicsHelper.js","game/engine/GameObject.js","game/Level.js","KeyBinding.js","game/engine/input/MouseHandler.js","game/engine/shapes/Line.js","game/Bullet.js","game/Player.js","game/engine/math/PointMath.js","game/FieldOfVison.js","game/engine/FPSView.js","components/Canvas.js","game/index.js","App.js","serviceWorker.js","index.js"],"names":["GraphicsHelper","context","windowWidth","windowHeight","this","drawCircle","bind","drawRect","drawLine","rotate","restore","save","translate","imageSmoothingEnabled","x","y","text","color","font","fillStyle","fillText","radius","beginPath","arc","Math","PI","fill","stroke","xa","ya","xb","yb","strokeStyle","moveTo","lineTo","angle","w","h","rect","BASE_PARENT","offsetX","offsetY","GameObject","localX","localY","parent","children","start","update","render","updateLoop","renderLoop","addChild","startLoop","removeChild","graphics","forEach","child","delta","input","gameObject","push","_","remove","go","Level","keyBinding","value","key","isDown","isUp","press","undefined","release","downHandler","event","preventDefault","upHandler","downListener","upListener","window","addEventListener","unsubscribe","removeEventListener","instance","clickHandlers","init","handleMouseMove","handleClick","addClickHandler","document","onmousemove","pageX","pageY","handler","clientX","clientY","riseOverRun","x1","y1","x2","y2","Bullet","rise","run","startX","startY","speed","maxDistance","size","sqrt","pow","wKey","aKey","sKey","dKey","Player","handleKeyboardInput","handleMouseClick","MouseInput","bullet","degreesToRadians","angleInDegrees","VIEW_OFFSET","FieldOfVison","fovDistance","lookX","lookY","atan2","FPSView","frameCount","fps","setInterval","drawText","HEIGHT","innerHeight","WIDTH","innerWidth","Canvas","lastFrameTime","loop","game","root","player","time","deltaTime","g","requestAnimationFrame","refs","canvas","getContext","ref","width","height","onClick","Component","App","className","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.931d38b1.chunk.js","sourcesContent":["\nexport class GraphicsHelper {\n\n    constructor(context, windowWidth, windowHeight){\n        this.context = context\n        this.drawCircle = this.drawCircle.bind(this)\n        this.drawRect = this.drawRect.bind(this)\n        this.drawLine = this.drawLine.bind(this)\n        this.rotate = this.rotate.bind(this);\n        this.restore = this.restore.bind(this);\n        this.save = this.save.bind(this);\n        this.translate = this.translate.bind(this);\n        this.windowHeight = windowHeight\n        this.windowWidth = windowWidth\n        this.context.imageSmoothingEnabled = false\n    }\n\n    drawText(x, y, text, color, font = \"30px Arial\"){\n        this.context.fillStyle = color;\n        this.context.font = font;\n        this.context.fillText(text, x, y);\n    }\n\n    drawCircle(x, y, radius, color){\n        this.context.fillStyle = color;\n        this.context.beginPath();\n        this.context.arc(x, y, radius, 0, 2 * Math.PI);\n        this.context.fill();\n        this.context.stroke();\n    }\n\n    drawLine(xa, ya, xb, yb, color){\n        this.context.strokeStyle = color;\n        this.context.beginPath();\n        this.context.moveTo(xa, ya);\n        this.context.lineTo(xb, yb);\n        this.context.stroke(); \n    }\n    \n    rotate(angle){\n        this.context.rotate(angle)\n    }\n    \n    restore(){\n        this.context.restore()\n    }\n\n    save(){\n        this.context.save()\n    }\n\n    translate(x, y){\n        this.context.translate(x, y)\n    }\n\n    drawRect(x, y, w, h, color){\n        this.context.fillStyle = color;\n        this.context.beginPath();\n        this.context.rect(x, y, w, h)\n        this.context.fill();\n        this.context.stroke();\n    }\n}\n","import _ from \"lodash\"\n\nconst BASE_PARENT = {\n  offsetX: () => 0,\n  offsetY: () => 0\n}\n\n /**\n   * static method for making new objects at runtime\n   * instantiate(clazz, parent){\n   *  let obj = new clazz() //this may be difficult\n   *  parent.addChild(obj)\n   *  obj.start() //not here yet\n   * }\n   */\n\nexport class GameObject {\n\n  constructor(){\n    this.localX = 0\n    this.localY = 0\n    this.parent = BASE_PARENT;\n    this.children = []\n    this.start = this.start.bind(this);\n    this.update = this.update.bind(this);\n    this.render = this.render.bind(this);\n    this.updateLoop = this.updateLoop.bind(this);\n    this.renderLoop = this.renderLoop.bind(this);\n    this.addChild = this.addChild.bind(this);\n    this.offsetX = this.offsetX.bind(this);\n    this.offsetY = this.offsetY.bind(this);\n    this.startLoop = this.startLoop.bind(this);\n    this.removeChild = this.removeChild.bind(this);\n  }\n\n  /**\n   * When updating, use localX and localY.\n   * When rendering, use offsetX and offsetY\n   */\n  offsetX() {\n    return this.localX + this.parent.offsetX()\n  }\n\n  offsetY() {\n    return this.localY + this.parent.offsetY()\n  }\n\n  startLoop(graphics){\n    this.start(graphics)\n    this.children.forEach(child => {\n      child.startLoop(graphics)\n    });\n  }\n\n  updateLoop(delta, input){\n    this.update(delta, input)\n    this.children.forEach(child => {\n      child.updateLoop(delta, input)\n    });\n  }\n\n  renderLoop(graphics, delta){\n    this.children.forEach(child => {\n      child.renderLoop(graphics, delta)\n    });\n    this.render(graphics, delta)\n  }\n\n  addChild(gameObject){\n    gameObject.parent = this\n    this.children.push(gameObject);\n  }\n\n  removeChild(gameObject){\n    _.remove(this.children, go => go === gameObject)\n  }\n\n  start(){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {number} delta \n   */\n  update(delta){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {GraphicsHelper} graphics The context from the canvas\n   * @param {number} delta \n   */\n  render(graphics, delta) {\n\n  }\n}\n","import { GameObject } from \"./engine/GameObject\";\n\nexport class Level extends GameObject {\n\n  start(){\n    this.color = \"black\"\n  }\n\n  render(graphics){\n    graphics.drawRect(this.offsetX(), this.offsetY(), graphics.windowWidth, graphics.windowHeight, this.color)\n  }\n}\n","export function keyBinding(value) {\n    let key = {};\n    key.value = value;\n    key.isDown = false;\n    key.isUp = true;\n    key.press = undefined;\n    key.release = undefined;\n    //The `downHandler`\n    key.downHandler = event => {\n      if (event.key === key.value) {\n        if (key.isUp && key.press) key.press();\n        key.isDown = true;\n        key.isUp = false;\n        event.preventDefault();\n      }\n    };\n  \n    //The `upHandler`\n    key.upHandler = event => {\n      if (event.key === key.value) {\n        if (key.isDown && key.release) key.release();\n        key.isDown = false;\n        key.isUp = true;\n        event.preventDefault();\n      }\n    };\n  \n    //Attach event listeners\n    const downListener = key.downHandler.bind(key);\n    const upListener = key.upHandler.bind(key);\n    \n    window.addEventListener(\n      \"keydown\", downListener, false\n    );\n    window.addEventListener(\n      \"keyup\", upListener, false\n    );\n    \n    // Detach event listeners\n    key.unsubscribe = () => {\n      window.removeEventListener(\"keydown\", downListener);\n      window.removeEventListener(\"keyup\", upListener);\n    };\n    \n    return key;\n  }","class MouseInput {\n\n    constructor(){\n        this.x = 0\n        this.y = 0\n        this.clickHandlers = []\n        this.init = this.init.bind(this)\n        this.handleMouseMove = this.handleMouseMove.bind(this)\n        this.handleClick = this.handleClick.bind(this);\n        this.addClickHandler = this.addClickHandler.bind(this);\n    }\n\n    init(){\n        document.onmousemove = this.handleMouseMove\n    }\n\n    handleMouseMove(event){\n        this.x = event.pageX\n        this.y = event.pageY\n    }\n\n    handleClick(event){\n        this.clickHandlers.forEach(handler => {\n            handler(event.clientX, event.clientY)\n        })\n    }\n\n    addClickHandler(handler){\n        this.clickHandlers.push(handler)\n    }\n}\n\nconst instance = new MouseInput()\n\nexport default instance\n","import { Point } from \"./Point\";\n\nexport class Line{\n\n  constructor(x1, y1, x2, y2){\n    this.start = new Point(x1, y1)\n    this.end = new Point(x2, y2)\n    this.rotateAround = this.rotateAround.bind(this);\n    this.rotate = this.rotate.bind(this);\n    this.getSlope = this.getSlope.bind(this);\n  }\n\n  rotateAround(centerX, centerY, angle){\n    this.start.rotateAround(centerX, centerY, angle)\n    this.end.rotateAround(centerX, centerY, angle)\n  }\n\n  rotate(angle){\n    this.rotateAround(0,0, angle)\n  }\n\n  getSlope(){\n    return slope(this.start.x, this.start.y, this.end.x, this.end.y)\n  }\n}\n\nexport function distanceBetween(x1,y1, x2,y2){\n  return Math.sqrt(\n    Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2)\n  )\n}\n\nexport function slope(x1, y1, x2, y2){\n  let slopeValues = riseOverRun(x1, y1, x2, y2)\n  return slopeValues[0]/slopeValues[1]\n}\n\nexport function riseOverRun(x1, y1, x2, y2){\n  return [y2 - y1, x2 - x1]\n}\n\nexport function buildLine(x1, y1, slope, distance){\n  let point = findPoint(x1, y1, slope, distance)\n\n  return new Line(x1, y1, point.x, point.y)\n}\n\nexport function unitLengthVector(slope){\n  return Math.sqrt(1 + Math.pow(slope, 2))\n}\n\nexport function findPoint(startX, startY, rise, run, distance){\n  if(rise === 0){\n    return [startX + distance, startY]\n  }\n  if(run===0){\n    return [startX, startY + distance]\n  }\n  let slope  = rise/run\n  let unit = 1 / unitLengthVector(slope)\n\n  let x = (startX + (distance * unit))\n  let y = (startY + slope * distance * unit) * (rise/rise)\n\n  if(run < 0){\n    x *= -1\n    y *= -1\n  }\n\n  return [x, y]\n}\n\n/**\n * returns the angle, in radians, between 2 lines given the start and end coordinates of each line\n * \n * @param {number} x1a \n * @param {number} y1a \n * @param {number} x2a \n * @param {number} y2a \n * @param {number} x1b \n * @param {number} y1b \n * @param {number} x2b \n * @param {number} y2b \n * \n * @returns {number} the angle in radians\n */\nexport function angleDifference(x1a, y1a, x2a,y2a, x1b,y1b, x2b, y2b){\n  let slopeA = slope(x1a,y1a, x2a,y2a)\n  let slopeB = slope(x1b,y1b, x2b,y2b)\n\n  return Math.atan(\n      (slopeB - slopeA) / (1 + (slopeB * slopeA))\n  )\n}\n\nexport function angle(x1a, y1a, x2a,y2a, x1b,y1b, x2b, y2b){\n  return Math.abs(\n    angleDifference(x1a, y1a, x2a,y2a, x1b,y1b, x2b, y2b)\n  )\n}","import { GameObject } from \"./engine/GameObject\";\nimport { distanceBetween } from \"./engine/shapes/Line\";\n\nexport class Bullet extends GameObject {\n\n    constructor(rise, run, startX, startY){\n        super()\n        this.rise = rise\n        this.run = run\n        this.startX = startX\n        this.startY = startY\n    }\n\n    start(){\n        this.speed = 20\n        this.maxDistance = 1000\n        this.color=\"white\"\n        this.size = 6\n    }\n\n    update(delta){\n        this.localX += this.run  * delta / 10\n        this.localY += this.rise * delta / 10\n        if(distanceBetween(this.offsetX(), this.offsetY(), this.startX, this.startY) > this.maxDistance){\n            this.parent.removeChild(this)\n        }\n    }\n\n    render(graphics){\n        graphics.drawRect(this.offsetX(), this.offsetY(), this.size, this.size, this.color)\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { keyBinding } from \"../KeyBinding\";\nimport MouseInput from \"./engine/input/MouseHandler\"\nimport { Bullet } from \"./Bullet\";\nimport { riseOverRun } from \"./engine/shapes/Line\";\n\nconst wKey = keyBinding(\"w\")\nconst aKey = keyBinding(\"a\")\nconst sKey = keyBinding(\"s\")\nconst dKey = keyBinding(\"d\")\n\nexport class Player extends GameObject {\n\n  constructor(){\n    super()\n    this.handleKeyboardInput = this.handleKeyboardInput.bind(this);\n    this.handleMouseClick = this.handleMouseClick.bind(this);\n  }\n\n  start(){\n    this.localX = 50\n    this.localY = 50\n    this.radius = 20\n    this.speed = 5\n    this.color = \"blue\"\n    MouseInput.addClickHandler(this.handleMouseClick)\n  }\n\n  render(graphics){\n    graphics.drawCircle(this.offsetX(), this.offsetY(), this.radius, this.color)\n  }\n\n  update(delta){\n    this.handleKeyboardInput(delta)\n  }\n\n  handleKeyboardInput(delta){\n    if(wKey.isDown){\n        this.localY -= this.speed * delta\n    }\n    if(sKey.isDown){\n        this.localY += this.speed * delta\n    }\n    if(aKey.isDown){\n        this.localX -= this.speed * delta\n    }\n    if(dKey.isDown){\n        this.localX += this.speed * delta\n    }\n  }\n\n  handleMouseClick(x, y){\n    let [rise, run] = riseOverRun(this.offsetX(), this.offsetY(), x, y)\n    let bullet = new Bullet(rise, run, this.offsetX(), this.offsetY()) \n    bullet.start()\n    this.addChild(bullet)\n  }\n}\n","export function degreesToRadians(angleInDegrees){\n  return angleInDegrees * Math.PI / 180\n}\n\nexport function radiansToDegrees(radians){\n  return radians * 180 / Math.PI\n}\n\nexport function rotateAround(centerX, centerY, x, y, angle) {\n  return rotate_point(x, y, centerX, centerY, angle)\n}\n\nfunction rotate_point(pointX, pointY, originX, originY, angle) {\n  angle = degreesToRadians(angle);\n  let cosTheta = Math.cos(angle)\n  let sinTheta = Math.sin(angle)\n  return {\n      x: cosTheta * (pointX-originX) - sinTheta * (pointY-originY) + originX,\n      y: sinTheta * (pointX-originX) + cosTheta * (pointY-originY) + originY\n  };\n}\n/**\n * Returns the angle, in radians, between the line made by the 4 coordinate parameters and \n * a vertical line pointing upwards starting at the first coordinates. This angle will be within the range 0 & +-180\n * \n * @param {number} x1 the x coordinate of the first point\n * @param {number} y1 the y coordinate of the first point\n * @param {number} x2 the x coordinate of the second point\n * @param {number} y2 the y coordinate of the second point\n * @returns {number} the angle in radians\n */\nexport function angleBetween(x1, y1, x2, y2){\n  return Math.atan2(x2 - x1, (y2 - y1) * -1 );\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { angleBetween, radiansToDegrees, degreesToRadians } from \"./engine/math/PointMath\";\nimport input from './engine/input/MouseHandler'\n\nconst VIEW_OFFSET = degreesToRadians(140)\n\nexport class FieldOfVison extends GameObject {\n\n  constructor(){\n    super()\n    this.fovDistance = 1000\n  }\n\n  start(){\n    this.lookX = 0\n    this.lookY = 0\n    this.angle = 0\n    this.color = \"white\"\n  }\n\n  update(delta){\n    this.angle = angleBetween(this.offsetX(), this.offsetY(), input.x, input.y)\n  }\n\n  render(graphics){\n    graphics.save()\n    graphics.translate(this.offsetX(), this.offsetY())\n    graphics.rotate(this.angle - VIEW_OFFSET)\n    graphics.drawLine(0, 0, 0, this.fovDistance, this.color)\n    graphics.drawLine(0, 0, this.fovDistance, 0, this.color)\n    // graphics.drawText(10, 0, `Angle: ${radiansToDegrees(this.angle)}`, this.color)\n    graphics.restore()\n  }\n}","import { GameObject } from \"./GameObject\";\n\nexport class FPSView extends GameObject {\n\n  start(){\n    this.localY = 25\n    this.frameCount = 0\n    this.fps = 0\n    this.color = \"white\"\n    setInterval(() => {\n      this.fps = this.frameCount\n      this.frameCount = 0\n    }, 1000)\n  }\n\n  render(graphics){\n    this.frameCount++\n    graphics.drawText(this.offsetX(),this.offsetY(), `FPS: ${this.fps}`, this.color)\n  }\n}","import React, {Component} from 'react'\nimport { GraphicsHelper } from '../GraphicsHelper'\nimport { init } from '../game'\nimport MouseInput from '../game/engine/input/MouseHandler'\n\nconst FRAME_INTERVAL = 1000 / 60 //60 fps\nconst HEIGHT = window.innerHeight\nconst WIDTH = window.innerWidth\n\nexport class Canvas extends Component {\n\n    constructor(){\n        super()\n        this.lastFrameTime = 0\n        this.loop = this.loop.bind(this);\n        this.game = init()\n    }\n\n    loop(time){\n        const elapsedFrameTime = time - this.lastFrameTime;\n        const deltaTime = FRAME_INTERVAL / elapsedFrameTime;\n        this.game.updateLoop(deltaTime)\n        this.game.renderLoop(this.g, deltaTime)\n        this.lastFrameTime = time\n        requestAnimationFrame(this.loop); \n    }\n\n    componentDidMount(){  \n        this.g = new GraphicsHelper(this.refs.canvas.getContext(\"2d\"), WIDTH, HEIGHT)\n        MouseInput.init()\n        this.game.startLoop(this.g)\n        requestAnimationFrame(this.loop);\n    }\n\n    render() { \n        return (\n            <canvas ref=\"canvas\" width={WIDTH} height={HEIGHT} onClick={MouseInput.handleClick}></canvas>\n        )\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { Level } from \"./Level\";\nimport { Player } from \"./Player\";\nimport { FieldOfVison } from \"./FieldOfVison\";\nimport { FPSView } from \"./engine/FPSView\";\n\n\nexport function init(){\n  const root = new GameObject()\n  root.addChild(new Level())\n  root.addChild(new FPSView())\n  const player = new Player()\n    player.addChild(new FieldOfVison())\n  root.addChild(player)\n  return root\n}\n","import React from 'react';\nimport './App.css';\nimport { Canvas } from './components/Canvas';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Canvas/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}