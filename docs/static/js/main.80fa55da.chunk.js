(this["webpackJsonpmafia.io"]=this["webpackJsonpmafia.io"]||[]).push([[0],{12:function(t){t.exports=JSON.parse("[[6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,5],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,6,1,1,1,1,1,1,5,0,0,0,0,0,0,6,1,1,1,1,1,1,1,1,1,5,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,4,5,5,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,2,5,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,4,3,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,1,1,3,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,6,5,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,1,1,1,1,5,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,1,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,1,1,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,1,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,5,0,0,0,6,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,1,1,1,1,1,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,1,1,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,6,1,1,1,1,3,0,0,0,0,6,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,0,0,0,4,3,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,6,2,0,0,0,0,0,0,0,0,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,4,3,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,5,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,6,1,1,1,1,3,0,0,0,6,1,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,0,0,4,3,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,6,1,1,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,1,1,1,1,5,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,1,1,5,0,0,0,0,6,1,1,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,3,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,4,3,0,0,0,0,4,3,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[2,0,0,0,0,0,0,0,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2],[4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3]]")},16:function(t,e){t.exports="data:image/png;base64,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"},30:function(t,e,a){t.exports=a(43)},35:function(t,e,a){},36:function(t,e,a){},38:function(t,e,a){},43:function(t,e,a){"use strict";a.r(e);var n,i,r=a(0),s=a.n(r),o=a(23),l=a.n(o),h=(a(35),a(36),a(26)),c=a(13),u=a(1),f=a(2),d=a(4),v=a(3),y=a(10),p=a(5);function g(t,e,a,n){return Math.sqrt(Math.pow(a-t,2)+Math.pow(n-e,2))}function w(t){return t*Math.PI/180}function m(t,e,a,n){return Math.atan2(a-t,-1*(n-e))}var k=40,b=40;function O(t){return new Promise((function(e,a){(n=new Image).onload=function(){return function(t,e){(i=document.createElement("canvas")).width=460,i.height=80;var a=i.getContext("2d");a.imageSmoothingEnabled=!1,a.drawImage(t,0,0,20,20,0,0,40,40),a.save(),a.translate(40,0),a.drawImage(t,20,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(80,0),a.drawImage(t,80,0,20,20,0,0,20,20),a.restore(),a.save(),a.translate(100,0),a.drawImage(t,40,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(180,0),a.rotate(w(90)),a.drawImage(t,40,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(180,0),a.drawImage(t,60,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(260,0),a.rotate(w(90)),a.drawImage(t,60,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(260,40),a.rotate(w(-90)),a.drawImage(t,60,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(340,40),a.rotate(w(180)),a.drawImage(t,60,0,20,20,0,0,40,40),a.restore(),a.save(),a.translate(80,20),a.drawImage(t,0,20,20,20,0,0,20,20),a.restore(),a.save(),a.translate(340,0),a.drawImage(t,20,20,20,20,0,0,20,20),a.restore(),a.save(),a.translate(360,0),a.drawImage(t,40,20,20,20,0,0,40,40),a.restore(),a.save(),a.translate(400,0),a.drawImage(t,60,20,20,20,0,0,20,20),a.restore(),a.save(),a.translate(400,20),a.drawImage(t,80,20,20,20,0,0,20,20),a.restore(),a.save(),a.translate(420,0),a.drawImage(t,0,40,20,20,0,0,20,20),a.restore(),a.save(),a.translate(420,20),a.drawImage(t,20,40,20,20,0,0,20,20),a.restore(),a.save(),a.translate(440,0),a.drawImage(t,40,40,20,20,0,0,20,20),a.restore(),e(i)}(n,e)},n.onerror=a,n.src=t}))}function j(t,e,a){t.drawImage(i,40,0,40,40,e,a,40,40)}var C=[{x:400,y:0},{x:400,y:20},{x:420,y:0},{x:420,y:20},{x:440,y:0}];var A=2*Math.PI,x=window.innerHeight,E=window.innerWidth,I={height:x,width:E,center:{x:E/2,y:x/2}},S=function(){function t(e,a,n){Object(u.a)(this,t),this.layers=e,this.windowHeight=n,this.windowWidth=a,this.layer="default",this.setupCanvases(e)}return Object(f.a)(t,[{key:"setupCanvases",value:function(t){for(var e=Object.keys(t).length,a=0;a<e;a++)this.getContext(Object.keys(t)[a]).imageSmoothingEnabled=!1}},{key:"getContext",value:function(){return this.layers[this.layer].getContext("2d")}},{key:"drawText",value:function(t,e,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"white",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"30px Arial";this.getContext().fillStyle=n,this.getContext().font=i,this.getContext().fillText(a,t,e)}},{key:"setLayer",value:function(t){this.layer=t}},{key:"setTransparency",value:function(t){this.getContext().globalAlpha=t}},{key:"setShadow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rgba(0,0,0,0.5)";this.getContext().shadowColor=e,this.getContext().shadowBlur=t}},{key:"drawCircle",value:function(t,e,a,n){this.getContext().fillStyle=n,this.getContext().beginPath(),this.getContext().arc(t,e,a,0,A),this.getContext().fill(),this.getContext().stroke()}},{key:"drawLine",value:function(t,e,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"cyan";this.getContext().strokeStyle=i,this.getContext().beginPath(),this.getContext().moveTo(t,e),this.getContext().lineTo(a,n),this.getContext().stroke()}},{key:"clear",value:function(){this.getContext().clearRect(0,0,E,x)}},{key:"rotate",value:function(t){this.getContext().rotate(t)}},{key:"restore",value:function(){this.getContext().restore(),this.layer="default"}},{key:"save",value:function(){this.getContext().save()}},{key:"translate",value:function(t,e){this.getContext().translate(t,e)}},{key:"drawRect",value:function(t,e,a,n,i){this.getContext().fillStyle=i,this.getContext().beginPath(),this.getContext().rect(t,e,a,n),this.getContext().fill()}},{key:"drawSquare",value:function(t,e,a,n){this.drawRect(t,e,a,a,n)}},{key:"drawSprite",value:function(t,e,a,n,i){this.getContext().drawImage(t,e,a,n,i)}},{key:"drawBackground",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.getContext().drawImage(t,e,a)}},{key:"drawPlayer",value:function(t,e){!function(t,e,a){t.drawImage(i,0,0,k,b,e,a,k,b)}(this.getContext(),t,e)}},{key:"drawBullet",value:function(t,e){!function(t,e,a){t.drawImage(i,80,0,20,20,e,a,20,20)}(this.getContext(),t,e)}},{key:"drawBadge",value:function(t,e){!function(t,e,a){t.drawImage(i,340,0,20,20,e,a,20,20)}(this.getContext(),t,e)}},{key:"drawSkull",value:function(t,e){!function(t,e,a){t.drawImage(i,80,20,20,20,e,a,20,20)}(this.getContext(),t,e)}},{key:"drawAmmo",value:function(t,e){!function(t,e,a){t.drawImage(i,360,0,40,40,e,a,40,40)}(this.getContext(),t,e)}},{key:"drawExplosion",value:function(t,e,a){!function(t,e,a,n){t.drawImage(i,C[n].x,C[n].y,20,20,e,a,20,20)}(this.getContext(),t,e,a)}}]),t}();var Y=a(24),M=a.n(Y),X={offsetX:0,offsetY:0,name:"BASE_PARENT"};var D=function(){function t(){Object(u.a)(this,t),this.localX=0,this.localY=0,this.parent=X,this.children=[]}return Object(f.a)(t,[{key:"startLoop",value:function(t){this.start(t),this.children.forEach((function(e){e.startLoop(t)}))}},{key:"updateLoop",value:function(t){this.update(t),this.children.forEach((function(e){e.updateLoop(t)}))}},{key:"renderLoop",value:function(t,e){this.render(t,e),this.children.forEach((function(a){a.renderLoop(t,e)}))}},{key:"addChild",value:function(t){t.parent=this,this.children.push(t)}},{key:"removeChild",value:function(t){M.a.remove(this.children,(function(e){return e===t}))}},{key:"spawn",value:function(t){this.addChild(t),t.start()}},{key:"destroy",value:function(){this.parent.removeChild(this)}},{key:"start",value:function(){}},{key:"update",value:function(t){}},{key:"render",value:function(t,e){}},{key:"name",get:function(){return"GameObject"}},{key:"offsetX",get:function(){return this.localX+this.parent.offsetX}},{key:"offsetY",get:function(){return this.localY+this.parent.offsetY}}]),t}(),P=a(9),T=a(12),B=[j,function(t,e,a){t.drawImage(i,100,0,40,40,e,a,40,40)},function(t,e,a){t.drawImage(i,140,0,40,40,e,a,40,40)},function(t,e,a){t.drawImage(i,180,0,40,40,e,a,40,40)},function(t,e,a){t.drawImage(i,220,0,40,40,e,a,40,40)},function(t,e,a){t.drawImage(i,260,0,40,40,e,a,40,40)},function(t,e,a){t.drawImage(i,300,0,40,40,e,a,40,40)}],L=40;function R(t,e,a,n){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:L,r=0;r<e.length;r++)for(var s=e[r],o=0;o<s.length;o++){var l=s[o],h=o*i+a/2,c=r*i+n/2;j(t,h,c),l>0&&B[l](t,h,c)}}function z(t){var e={};e.value=t,e.isDown=!1,e.isUp=!0,e.press=void 0,e.release=void 0,e.downHandler=function(t){t.key===e.value&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1,t.preventDefault())},e.upHandler=function(t){t.key===e.value&&(e.isDown&&e.release&&e.release(),e.isDown=!1,e.isUp=!0,t.preventDefault())};var a=e.downHandler.bind(e),n=e.upHandler.bind(e);return window.addEventListener("keydown",a,!1),window.addEventListener("keyup",n,!1),e.unsubscribe=function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",n)},e}var W=function(){function t(){Object(u.a)(this,t),this.map=new F,this.player={x:20,y:22,offsetX:0,offsetY:0,direction:0,ammo:6,name:"Jay Joe"},this.otherPlayers=[{name:"RagnarRoog",x:1040+I.center.x,y:1040+I.center.y}]}return Object(f.a)(t,[{key:"updatePlayerPosition",value:function(t,e){this.player.offsetX=-t,this.player.offsetY=-e;var a=this.map.playerPosition(t,e),n=Object(P.a)(a,2),i=n[0],r=n[1];this.player.x=i,this.player.y=r}}]),t}(),F=function(){function t(){Object(u.a)(this,t),this.tiles=T,this.tileSize=40,this.offsets={x:0,y:0}}return Object(f.a)(t,[{key:"tileAt",value:function(t,e){return this.tiles[e][t]}},{key:"playerTile",value:function(t,e){var a=this.playerPosition(t,e),n=Object(P.a)(a,2),i=n[0],r=n[1];return this.tileAt(i,r)}},{key:"playerPosition",value:function(t,e){return this.offsets.x=t,this.offsets.y=e,[Math.floor(-t/this.tileSize),Math.floor(-e/this.tileSize)]}},{key:"tileFromScreenSpace",value:function(t,e){var a=Math.floor((I.center.x-t)/this.tileSize),n=Math.floor((I.center.y-e)/this.tileSize),i=H.player.y-n,r=H.player.x-a;return i<0||i>this.height||r<0||r>this.width?-1:this.tiles[i][r]}},{key:"width",get:function(){return this.tiles[0].length}},{key:"height",get:function(){return this.tiles.length}}]),t}(),H=new W,Q=H,Z=new(function(){function t(){Object(u.a)(this,t),this.x=0,this.y=0,this.clickHandlers=[],this.init=this.init.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleClick=this.handleClick.bind(this),this.addClickHandler=this.addClickHandler.bind(this)}return Object(f.a)(t,[{key:"init",value:function(){document.onmousemove=this.handleMouseMove}},{key:"handleMouseMove",value:function(t){this.x=t.pageX,this.y=t.pageY}},{key:"handleClick",value:function(t){this.clickHandlers.forEach((function(e){e(t.clientX,t.clientY)}))}},{key:"addClickHandler",value:function(t){this.clickHandlers.push(t)}}]),t}()),G=function(t){function e(t,a){var n;return Object(u.a)(this,e),(n=Object(d.a)(this,Object(v.a)(e).call(this))).localX=t,n.localY=a,n.frameIndex=0,n.frameCount=4,n}return Object(p.a)(e,t),Object(f.a)(e,[{key:"update",value:function(t){this.frameIndex>=this.frameCount&&this.parent.removeChild(this),this.frameIndex++}},{key:"render",value:function(t){t.save(),t.translate(Math.floor(this.offsetX-10),Math.floor(this.offsetY-10)),t.drawExplosion(0,0,this.frameIndex),t.restore()}},{key:"name",get:function(){return"Explosion"}}]),e}(D);function U(t,e,a,n){var i=Math.abs(n,-e)>Math.abs(a,t);if(i){var r=t;t=e,e=r,r=a,a=n,n=r}if(t>a){var s=t;t=a,a=s,s=e,e=n,n=s}for(var o=a-t,l=Math.abs(n-e),h=e<n?1:-1,c=[],u=0,f=e,d=t;d<=a;d++)i?c.push([Math.floor(f),Math.floor(d)]):c.push([Math.floor(d),Math.floor(f)]),2*(u+=l)>=o&&(f+=h,u-=o);return c}var V=1;var q=w(180),K=function(t){function e(t,a,n,i,r){var s;return Object(u.a)(this,e),(s=Object(d.a)(this,Object(v.a)(e).call(this))).prevX=t,s.prevY=a,s.localX=t,s.localY=a,s.distance=0,s.angle=n-q,s.target={x:i,y:r},s}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){Q.player.ammo-=1,this.maxDistance=1e3,this.size=6,this.speed=20}},{key:"update",value:function(t){if(this.distance+=this.speed*t,this.distance>this.maxDistance)return this.destroy(),void this.parent.spawn(new G(this.localX,this.localY));var e=function(t,e,a,n,i){var r=Math.sin(i),s=Math.cos(i);return[(a-=t)*s+-(n-=e)*r+t,a*r+n*s+e]}(this.localX,this.localY,this.localX,this.localY+this.speed*t,this.angle),a=Object(P.a)(e,2),n=a[0],i=a[1];this.prevX=this.offsetX,this.prevY=this.offsetY,this.localX=Math.floor(n),this.localY=Math.floor(i),function(t,e,a,n){for(var i=U(t,e,a,n),r=0;r<i.length;r+=V){var s=Object(P.a)(i[r],2),o=s[0],l=s[1];if(0!==H.map.tileFromScreenSpace(o,l))return[o,l]}}(this.prevX,this.prevY,this.offsetX,this.offsetY)&&(this.parent.spawn(new G(this.localX,this.localY)),this.destroy())}},{key:"render",value:function(t){t.save(),t.translate(this.offsetX,this.offsetY),t.rotate(this.angle+q),t.drawBullet(0,0),t.restore()}},{key:"name",get:function(){return"Bullet"}}]),e}(D),N=Math.floor(.15*I.height),J=function(t){function e(){return Object(u.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.rendered=!1}},{key:"render",value:function(t){this.rendered||(t.setLayer("ui"),t.drawRect(0,0,I.width,N,"black"),t.drawRect(0,I.height-N,I.width,N,"black"),t.restore(),this.rendered=!0)}}]),e}(D),$=z("w"),_=z("a"),tt=z("s"),et=z("d"),at=(Math.floor(.15*I.height),function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).handleMouseClick=t.handleMouseClick.bind(Object(y.a)(t)),t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.speed=5,this.cachedBackground=function(){var t=document.createElement("canvas"),e=t.getContext("2d",{alpha:!1}),a=T[0].length*L,n=T.length*L,i=window.innerHeight,r=window.innerWidth;return t.width=a+r,t.height=n+i,e.fillStyle="black",e.beginPath(),e.rect(0,0,t.width,t.height),e.fill(),e.stroke(),e.save(),R(e,T,r,i),t}(),this.localX=-H.player.x*H.map.tileSize,this.localY=-H.player.y*H.map.tileSize,Z.addClickHandler(this.handleMouseClick)}},{key:"update",value:function(t){var e=this.handleKeyboardInput(t),a=Object(P.a)(e,2),n=a[0],i=a[1];0===H.map.playerTile(this.offsetX,this.offsetY+i)&&(this.localY+=i),0===H.map.playerTile(this.offsetX+n,this.offsetY)&&(this.localX+=n),H.updatePlayerPosition(this.localX,this.localY)}},{key:"handleMouseClick",value:function(t,e){if(H.player.ammo>0){var a=-(this.offsetX-I.center.x),n=-(this.offsetY-I.center.y),i=m(I.center.x,I.center.y,t,e);this.spawn(new K(a,n,i,t,e))}}},{key:"render",value:function(t){t.drawBackground(this.cachedBackground,this.offsetX,this.offsetY)}},{key:"handleKeyboardInput",value:function(t){var e=0,a=0;return $.isDown&&(a+=this.speed*t),tt.isDown&&(a-=this.speed*t),_.isDown&&(e+=this.speed*t),et.isDown&&(e-=this.speed*t),[e,a]}},{key:"name",get:function(){return"Level"}}]),e}(D)),nt={BYSTANDER:"BYSTANDER",MAFIA:"MAFIA",DETECTIVE:"DETECTIVE"},it=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).width=40,t.midpoint=t.width/2,t.state=nt.BYSTANDER,t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.state=Object.values(nt)[Math.floor(3*Math.random())],this.localX=I.center.x,this.localY=I.center.y}},{key:"render",value:function(t){t.setLayer("players"),t.drawText(this.offsetX-50,this.offsetY-25,Q.player.name,"cyan","15px arial"),t.drawPlayer(Math.floor(this.offsetX-this.midpoint),Math.floor(this.offsetY-this.midpoint)),this.state===nt.MAFIA&&t.drawSkull(Math.floor(this.offsetX+10),Math.floor(this.offsetY+10)),this.state===nt.DETECTIVE&&t.drawBadge(Math.floor(this.offsetX+10),Math.floor(this.offsetY+10)),t.restore()}},{key:"name",get:function(){return"Player"}}]),e}(D),rt=w(134),st=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).fovDistance=1e3,t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.localX=I.center.x,this.localY=I.center.y,this.lookX=0,this.lookY=0,this.angle=0}},{key:"update",value:function(t){this.angle=m(this.offsetX,this.offsetY,Z.x,Z.y),H.player.direction=this.angle}},{key:"render",value:function(t){t.save(),t.translate(this.offsetX,this.offsetY),t.setTransparency(.8),t.rotate(this.angle-rt),t.drawRect(-t.windowWidth,Math.floor(-1.5*t.windowWidth/2),t.windowWidth,Math.floor(1.5*t.windowWidth),"black"),t.drawRect(-0,-t.windowWidth,t.windowWidth,t.windowWidth,"black"),t.restore()}},{key:"name",get:function(){return"FieldOfVison"}}]),e}(D),ot=function(t){function e(){return Object(u.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){var t=this;this.localY=25,this.frameCount=0,this.fps=0,this.color="white",setInterval((function(){t.fps=t.frameCount,t.frameCount=0}),1e3)}},{key:"render",value:function(t){this.frameCount++,t.setLayer("ui"),t.drawRect(0,0,110,30,"black"),t.drawText(this.offsetX,this.offsetY,"FPS: ".concat(this.fps),this.color),t.restore()}}]),e}(D),lt=z("r"),ht=function(t){function e(){return Object(u.a)(this,e),Object(d.a)(this,Object(v.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.localY=I.height-75,this.localX=25}},{key:"update",value:function(t){lt.isDown&&(Q.player.ammo=6)}},{key:"render",value:function(t){t.setLayer("ui"),t.setTransparency(.15),t.drawRect(this.offsetX,this.offsetY,192,40,"black"),t.setTransparency(1);for(var e=0;e<Q.player.ammo;e++)t.drawAmmo(this.offsetX+30*e,this.offsetY);t.restore()}}]),e}(D),ct=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).dotSize=2,t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.image=this.renderMiniMap(),this.localX=I.width-125,this.localY=I.height-125}},{key:"render",value:function(t){t.setLayer("ui"),t.save(),t.translate(this.offsetX,this.offsetY),t.drawSprite(this.image,0,0,this.image.width,this.image.height),t.drawRect(this.dotSize*Q.player.x,this.dotSize*Q.player.y,4,4,"magenta"),t.restore()}},{key:"renderMiniMap",value:function(){var t=Q.map,e=document.createElement("canvas");e.width=t.width*this.dotSize,e.height=t.height*this.dotSize;for(var a=e.getContext("2d"),n=0;n<t.height;n++)for(var i=0;i<t.width;i++)0===t.tileAt(i,n)?ut(a,i*this.dotSize,n*this.dotSize,this.dotSize,this.dotSize,"black"):ut(a,i*this.dotSize,n*this.dotSize,this.dotSize,this.dotSize,"green");return e}},{key:"name",get:function(){return"MiniMap"}}]),e}(D);function ut(t,e,a,n,i,r){t.fillStyle=r,t.beginPath(),t.rect(e,a,n,i),t.fill()}var ft=w(-45),dt=w(45),vt=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).playerMap={},t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){var t=this;Q.otherPlayers.forEach((function(e){t.spawn(new yt(e))}))}}]),e}(D),yt=function(t){function e(t){var a;return Object(u.a)(this,e),(a=Object(d.a)(this,Object(v.a)(e).call(this))).player=t,a}return Object(p.a)(e,t),Object(f.a)(e,[{key:"start",value:function(){this.localX=this.player.x+Q.map.offsets.x,this.localY=this.player.y+Q.map.offsets.y}},{key:"update",value:function(t){this.localX=this.player.x+Q.map.offsets.x,this.localY=this.player.y+Q.map.offsets.y}},{key:"visibleToPlayer",value:function(){var t=function(t,e,a,n,i,r){var s=g(t,e,a,n),o=g(t,e,i,r),l=g(a,n,i,r);return Math.acos((s*s+o*o-l*l)/(2*s*o))}(I.center.x,I.center.y,this.offsetX,this.offsetY,Z.x,Z.y);return t>ft&&t<dt}},{key:"render",value:function(t){this.visibleToPlayer()&&(t.setLayer("players"),t.drawText(this.offsetX-50,this.offsetY-25,this.player.name,"red","15px arial"),t.drawRect(this.offsetX-20,this.offsetY-20,40,40,"cyan"),t.restore())}}]),e}(D),pt=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).layer="default",t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"render",value:function(t){t.setLayer(this.layer),t.clear(),t.restore()}}]),e}(D);var gt=a(16),wt=a.n(gt),mt=window.innerHeight,kt=window.innerWidth,bt=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).lastFrameTime=0,t.loop=t.loop.bind(Object(y.a)(t)),t.game=function(){var t=new D,e=new it,a=new ot,n=new J,i=new pt;return i.layer="players",n.addChild(a),n.addChild(new ht),n.addChild(new ct),t.addChild(new at),t.addChild(new st),t.addChild(i),t.addChild(e),t.addChild(new vt),t.addChild(n),t}(),t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"loop",value:function(t){var e=1e3/30/(t-this.lastFrameTime);this.game.updateLoop(e),this.game.renderLoop(this.g,e),this.lastFrameTime=t,requestAnimationFrame(this.loop)}},{key:"componentDidMount",value:function(){var t=this,e={default:this.refs.defaultCanvas,fov:this.refs.fovCanvas,players:this.refs.playerCanvas,ui:this.refs.uiCanvas};this.refs.uiCanvas.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.g=new S(e,kt,mt),this.g.drawText(kt/2,mt/2,"LOADING...","white"),Z.init(),O(wt.a).then((function(){t.game.startLoop(t.g),requestAnimationFrame(t.loop)}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("canvas",{ref:"defaultCanvas",width:kt,height:mt}),s.a.createElement("canvas",{ref:"fovCanvas",width:kt,height:mt}),s.a.createElement("canvas",{ref:"playerCanvas",width:kt,height:mt}),s.a.createElement("canvas",{ref:"uiCanvas",width:kt,height:mt,onClick:Z.handleClick}))}}]),e}(r.Component),Ot=a(29),jt=a(25);a(38);function Ct(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var At=function(t){function e(){var t;return Object(u.a)(this,e),(t=Object(d.a)(this,Object(v.a)(e).call(this))).state={tiles:T,images:[],currentBrush:1},t.handlePaint=t.handlePaint.bind(Object(y.a)(t)),t.updateBrush=t.updateBrush.bind(Object(y.a)(t)),t.saveMap=t.saveMap.bind(Object(y.a)(t)),t}return Object(p.a)(e,t),Object(f.a)(e,[{key:"componentDidMount",value:function(){var t=this;O(wt.a).then((function(){t.renderTiles(),B.forEach((function(e){var a=document.createElement("canvas");a.width=H.map.tileSize,a.height=H.map.tilesize,a.className="brush",a.onclick=function(){t.updateBrush(B.indexOf(e))},e(a.getContext("2d"),0,0),t.refs.pallet.appendChild(a)}))}))}},{key:"updateBrush",value:function(t){this.setState(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ct(a,!0).forEach((function(e){Object(jt.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ct(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.state,{currentBrush:t}))}},{key:"renderTiles",value:function(){R(this.refs.levelCanvas.getContext("2d"),this.state.tiles,0,0)}},{key:"componentDidUpdate",value:function(){this.renderTiles()}},{key:"handlePaint",value:function(t){var e=t.pageX,a=t.pageY,n=this.refs.levelCanvas,i=n.offsetLeft,r=n.offsetTop,s=n.offsetWidth/52,o=Math.floor([(e-i)/s]),l=Math.floor([(a-r)/s]),h=Object(Ot.a)(this.state.tiles);h[l][o]=this.state.currentBrush,this.setState({tiles:h})}},{key:"saveMap",value:function(){console.log(this.state.tiles)}},{key:"render",value:function(){return s.a.createElement("div",{className:"level-edit-container"},s.a.createElement("div",{ref:"pallet",className:"pallet"}),s.a.createElement("canvas",{onClick:this.handlePaint,className:"level-canvas",style:{position:"relative"},ref:"levelCanvas",width:2080,height:2080}),s.a.createElement("button",{onClick:this.saveMap},"Save"))}}]),e}(r.Component),xt=function(t){return s.a.createElement(h.a,null,s.a.createElement(c.c,null,s.a.createElement(c.a,{path:"/level-edit"},s.a.createElement(At,null)),s.a.createElement(c.a,{path:"/"},s.a.createElement(bt,null))))};var Et=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(xt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.80fa55da.chunk.js.map