{"version":3,"sources":["res/sprite-sheet.png","game/engine/Images.js","game/engine/shapes/Line.js","game/engine/math/PointMath.js","GraphicsHelper.js","game/engine/GameObject.js","game/engine/TiledLevelBuilder.js","KeyBinding.js","game/State.js","game/engine/input/MouseInput.js","game/Explosion.js","game/engine/physics/RayCast.js","game/Bullet.js","game/UIPanels.js","game/Level.js","game/Player.js","game/FieldOfVison.js","game/engine/FPSView.js","game/Ammo.js","game/MiniMap.js","game/engine/debug/CacheView.js","game/OtherPlayers.js","game/ScreenWipe.js","components/Canvas.js","game/index.js","components/LevelEdit.js","components/Routes.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","spriteSheet","cache","distanceBetween","x1","y1","x2","y2","Math","sqrt","pow","degreesToRadians","angleInDegrees","PI","angleBetween","atan2","SPRITE_WIDTH","SPRITE_HEIGHT","load","imagePath","Promise","resolve","reject","Image","onload","callback","document","createElement","width","height","context","getContext","imageSmoothingEnabled","drawImage","save","translate","restore","rotate","cacheImages","onerror","src","drawStoneFloorOn","x","y","explosionIndeces","ONE_RADIAN","HEIGHT","window","innerHeight","WIDTH","innerWidth","GameScreen","center","GraphicsHelper","canvases","windowWidth","windowHeight","this","layers","layer","setupCanvases","numberOfCanvases","Object","keys","length","i","text","color","font","fillStyle","fillText","layerName","alpha","globalAlpha","shadowValue","shadowColor","shadowBlur","radius","beginPath","arc","fill","stroke","xa","ya","xb","yb","strokeStyle","moveTo","lineTo","clearRect","angle","w","h","rect","size","drawRect","image","drawPlayerOn","drawBulletOn","drawBadgeOn","drawSkullOn","drawAmmoOn","frame","drawExplosionOn","BASE_PARENT","offsetX","offsetY","name","GameObject","localX","localY","parent","children","graphics","start","forEach","child","startLoop","delta","update","updateLoop","render","renderLoop","gameObject","push","_","remove","go","addChild","removeChild","tileFunctions","TILE_SIZE","drawTilesOn","tiles","row","tileIndex","xPosition","yPosition","keyBinding","value","key","isDown","isUp","press","undefined","release","downHandler","event","preventDefault","upHandler","downListener","bind","upListener","addEventListener","unsubscribe","removeEventListener","GameState","map","TileSet","player","direction","ammo","otherPlayers","PlayerModel","xOffset","yOffset","playerPosition","mapTiles","tileSize","offsets","tileAt","floor","xDiff","yDiff","yIndex","state","xIndex","Tile","index","position","PLAYER_STATES","ALIVE","DEAD","instance","clickHandlers","init","handleMouseMove","handleClick","addClickHandler","onmousemove","pageX","pageY","handler","clientX","clientY","Explosion","frameIndex","frameCount","drawExplosion","bresenhamLine","x0","y0","isSteep","abs","temp","deltaX","deltaY","yStep","points","error","STEP","hitAWall","tile","tileFromScreenSpace","RaycasResult","object","hitAnotherPlayer","eachPlayer","oneEighty","Bullet","targetX","targetY","prevX","prevY","distance","target","maxDistance","speed","explode","centerX","centerY","s","sin","c","cos","rotatePoint","result","startX","startY","endX","endY","wall","simpleRaycast","hit","spawn","destroy","drawBullet","PanelHeight","UIPanels","rendered","setLayer","wKey","aKey","sKey","dKey","Level","handleMouseClick","cachedBackground","canvas","mapWidth","defaultTiles","mapHeight","screenHeight","screenWidth","cacheLevel","MouseInput","updatePlayerPosition","handleKeyboardInput","xMove","yMove","canMoveVertically","canMoveHorizontally","playerTile","bulletXPos","bulletYPos","drawBackground","xMovement","yMovement","BYSTANDER","MAFIA","DETECTIVE","Player","midpoint","values","random","drawText","drawPlayer","drawSkull","drawBadge","VIEW_OFFSET","FieldOfVison","fovDistance","lookX","lookY","input","setTransparency","FPSView","fps","setInterval","rKey","Ammo","drawAmmo","MiniMap","dotSize","renderMiniMap","drawSprite","tileMap","mapImage","minViewableAngle","maxViewableAngle","OtherPlayers","playerMap","eachOtherPlayer","Frenemy","otherPlayer","updatePosition","originX","originY","p1x","p1y","p2x","p2y","dist1","dist2","dist3","acos","angleFromPoints","distanceToPlayer","visibleToPlayer","ScreenWipe","clear","Canvas","lastFrameTime","loop","game","root","fpsView","uiPanels","playerScreenWipe","time","deltaTime","g","requestAnimationFrame","default","refs","defaultCanvas","fov","fovCanvas","players","playerCanvas","ui","uiCanvas","e","spritesheet","then","ref","onClick","Component","LevelEdit","images","currentBrush","handlePaint","updateBrush","saveMap","renderTiles","fn","newCanvas","tilesize","className","onclick","indexOf","pallet","appendChild","setState","levelCanvas","offsetLeft","offsetTop","tileWidth","offsetWidth","xCoord","yCoord","console","log","style","Routes","props","path","App","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bd57dd66.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import { degreesToRadians } from \"./math/PointMath\"\n\nlet spriteSheet, cache\n\nexport const SPRITE_WIDTH = 40\nexport const SPRITE_HEIGHT = 40\n\nexport function load(imagePath){\n  return new Promise((resolve, reject) => {\n    spriteSheet = new Image()\n    spriteSheet.onload = () => cacheImages(spriteSheet, resolve)\n    spriteSheet.onerror = reject\n    spriteSheet.src = imagePath\n  })\n}\n\n/**\n * Caches and scales the spritesheet file\n * \n * @param {Image} spriteSheet \n * @param {function} callback \n */\nfunction cacheImages(spriteSheet, callback) {\n  cache = document.createElement('canvas');\n  cache.width = 460\n  cache.height = 80\n  const context = cache.getContext('2d')\n  context.imageSmoothingEnabled = false\n  // cache the player\n  context.drawImage(spriteSheet, 0,0,20,20, 0,0,40,40)\n\n  // cache the floor\n  context.save()\n  context.translate(40,0)\n  context.drawImage(spriteSheet, 20,0,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache the bullet\n  context.save()\n  context.translate(80, 0)\n  context.drawImage(spriteSheet, 80,0,20,20, 0,0,20,20)\n  context.restore()\n  // cache the horizontal wall\n  context.save()\n  context.translate(100,0)\n  context.drawImage(spriteSheet, 40,0,20,20, 0,0,40,40)\n  context.restore()\n\n  // cache the vertical wall\n  context.save()\n  context.translate(180,0) //need to double the width when rotating, real position is 140\n  context.rotate(degreesToRadians(90))\n  context.drawImage(spriteSheet, 40,0,20,20, 0,0,40,40)\n  context.restore()\n\n  // //cache the angeled wall corners\n\n  context.save()\n  context.translate(180,0)\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  context.save()\n  context.translate(260,0) //actual 220\n  context.rotate(degreesToRadians(90))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  context.save()\n  context.translate(260,40)\n  context.rotate(degreesToRadians(-90))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n  \n  context.save()\n  context.translate(340,40)\n  context.rotate(degreesToRadians(180))\n  context.drawImage(spriteSheet, 60,0,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache the skull\n  context.save()\n  context.translate(80,20)\n  context.drawImage(spriteSheet, 0,20,20,20, 0,0,20,20)\n  context.restore()\n\n  //cache the badge\n  context.save()\n  context.translate(340,0)\n  context.drawImage(spriteSheet, 20,20,20,20, 0,0,20,20)\n  context.restore()\n\n  //cache ammo\n  context.save()\n  context.translate(360,0)\n  context.drawImage(spriteSheet, 40,20,20,20, 0,0,40,40)\n  context.restore()\n\n  //cache first explosion frame\n\n  context.save()\n  context.translate(400,0)\n  context.drawImage(spriteSheet, 60,20,20,20, 0,0,20,20)\n  context.restore()\n\n    //cache second explosion frame\n\n    context.save()\n    context.translate(400,20)\n    context.drawImage(spriteSheet, 80,20,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache third explosion frame\n\n    context.save()\n    context.translate(420,0)\n    context.drawImage(spriteSheet, 0,40,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache fourth explosion frame\n\n    context.save()\n    context.translate(420,20)\n    context.drawImage(spriteSheet, 20,40,20,20, 0,0,20,20)\n    context.restore()\n\n    //cache fifth explosion frame\n\n    context.save()\n    context.translate(440,0)\n    context.drawImage(spriteSheet, 40,40,20,20, 0,0,20,20)\n    context.restore()\n\n  callback(cache)\n}\n\nexport function drawPlayerOn(context, x, y) {\n  context.drawImage(cache, 0,0,SPRITE_WIDTH,SPRITE_HEIGHT, x, y,SPRITE_WIDTH,SPRITE_HEIGHT)\n}\n\nexport function drawStoneFloorOn(context, x, y) {\n  context.drawImage(cache, 40,0,40,40, x, y,40,40)\n}\n\nexport function drawBulletOn(context, x, y) {\n  context.drawImage(cache, 80,0,20,20, x, y, 20,20)\n}\n\nexport function drawSkullOn(context, x, y) {\n  context.drawImage(cache, 80,20,20,20, x, y, 20,20)\n}\n\nexport function drawBadgeOn(context, x, y) {\n  context.drawImage(cache, 340,0,20,20, x, y, 20,20)\n}\n\nexport function drawHorizontalWallOn(context, x, y) {\n  context.drawImage(cache, 100,0,40,40, x, y, 40,40)\n}\n\nexport function drawVerticalWallOn(context, x, y) {\n  context.drawImage(cache, 140,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled1WallOn(context, x, y) {\n  context.drawImage(cache, 180,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled2WallOn(context, x, y) {\n  context.drawImage(cache, 220,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled3WallOn(context, x, y) {\n  context.drawImage(cache, 260,0,40,40, x, y, 40,40)\n}\n\nexport function drawAngeled4WallOn(context, x, y) {\n  context.drawImage(cache, 300,0,40,40, x, y, 40,40)\n}\n\nexport function drawAmmoOn(context, x, y) {\n  context.drawImage(cache, 360,0,40,40, x, y, 40,40)\n}\n\nconst explosionIndeces = [\n  {x:400, y:0},\n  {x:400, y:20},\n  {x:420, y:0},\n  {x:420, y:20},\n  {x:440, y:0},\n]\n\nexport function drawExplosionOn(context, x, y, frame){\n  context.drawImage(cache, explosionIndeces[frame].x, explosionIndeces[frame].y, 20, 20,  x, y, 20, 20)\n}\n\nexport function getCache(){\n  return cache\n}\n","import { Point } from \"./Point\";\n\nexport class Line{\n\n  constructor(x1, y1, x2, y2){\n    this.start = new Point(x1, y1)\n    this.end = new Point(x2, y2)\n    this.rotateAround = this.rotateAround.bind(this);\n    this.rotate = this.rotate.bind(this);\n    this.getSlope = this.getSlope.bind(this);\n  }\n\n  rotateAround(centerX, centerY, angle){\n    this.start.rotateAround(centerX, centerY, angle)\n    this.end.rotateAround(centerX, centerY, angle)\n  }\n\n  rotate(angle){\n    this.rotateAround(0,0, angle)\n  }\n\n  getSlope(){\n    return slope(this.start.x, this.start.y, this.end.x, this.end.y)\n  }\n}\n\nexport function distanceBetween(x1,y1, x2,y2){\n  return Math.sqrt(\n    Math.pow(x2-x1, 2) + Math.pow(y2-y1, 2)\n  )\n}\n\nexport function slope(x1, y1, x2, y2){\n  let slopeValues = riseOverRun(x1, y1, x2, y2)\n  return slopeValues[0]/slopeValues[1]\n}\n\nexport function riseOverRun(x1, y1, x2, y2){\n  return [y2 - y1, x2 - x1]\n}\n\nexport function buildLine(x1, y1, slope, distance){\n  let point = findPoint(x1, y1, slope, distance)\n\n  return new Line(x1, y1, point.x, point.y)\n}\n\nexport function unitLengthVector(slope){\n  return Math.sqrt(1 + Math.pow(slope, 2))\n}\n\nexport function findPoint(startX, startY, rise, run, distance){\n  if(rise === 0){\n    return [startX + distance, startY]\n  }\n  if(run===0){\n    return [startX, startY + distance]\n  }\n  let slope  = rise/run\n  let unit = 1 / unitLengthVector(slope)\n\n  let x = (startX + (distance * unit))\n  let y = (startY + slope * distance * unit) * (rise/rise)\n\n  if(run < 0){\n    x *= -1\n    y *= -1\n  }\n\n  return [x, y]\n}\n\nexport function midpointBetween(x1, y1, x2, y2){\n  return [(x1 + x2) / 2, (y1 + y2) / 2]\n}\n\n/**\n * returns the angle, in radians, between 2 lines given the start and end coordinates of each line\n * \n * @param {number} x1a \n * @param {number} y1a \n * @param {number} x2a \n * @param {number} y2a \n * @param {number} x1b \n * @param {number} y1b \n * @param {number} x2b \n * @param {number} y2b \n * \n * @returns {number} the angle in radians\n */\nexport function angleDifference(x1a,y1a, x2a,y2a, x1b,y1b, x2b,y2b){\n  let slopeA = slope(x1a,y1a, x2a,y2a)\n  let slopeB = slope(x1b,y1b, x2b,y2b)\n\n  return Math.atan(\n      (slopeB - slopeA) / (1 + (slopeB * slopeA))\n  )\n}\n\nexport function angle(x1a, y1a, x2a,y2a, x1b,y1b, x2b, y2b){\n  return Math.abs(\n    angleDifference(x1a, y1a, x2a,y2a, x1b,y1b, x2b, y2b)\n  )\n}","import { distanceBetween } from \"../shapes/Line\";\n\nexport function degreesToRadians(angleInDegrees){\n  return angleInDegrees * Math.PI / 180\n}\n\nexport function radiansToDegrees(radians){\n  return radians * 180 / Math.PI\n}\n\nexport function rotatePoint(centerX, centerY, x, y, angle) {\n  const s = Math.sin(angle);\n  const c = Math.cos(angle);\n\n  // translate point back to origin:\n  x -= centerX;\n  y -= centerY;\n\n  const xnew =  x * c + -y * s;\n  const ynew =  x * s + y * c;\n\n  // translate point back:\n  return [xnew + centerX, ynew + centerY]\n}\n\n/**\n * Returns the angle, in radians, between the line made by the 4 coordinate parameters and \n * a vertical line pointing upwards starting at the first coordinates. This angle will be within the range 0 & +-180\n * \n * @param {number} x1 the x coordinate of the first point\n * @param {number} y1 the y coordinate of the first point\n * @param {number} x2 the x coordinate of the second point\n * @param {number} y2 the y coordinate of the second point\n * @returns {number} the angle in radians\n */\nexport function angleBetween(x1, y1, x2, y2){\n  return Math.atan2(x2 - x1, (y2 - y1) * -1 );\n}\n\n/**\n * returns the angle between two lines that meet at the origin point\n * @param {number} originX \n * @param {number} originY \n * @param {number} p1x \n * @param {number} p1y \n * @param {number} p2x \n * @param {number} p2y \n */\nexport function angleFromPoints(originX,originY, p1x,p1y, p2x,p2y){\n  let dist1 = distanceBetween(originX, originY, p1x, p1y)\n  let dist2 = distanceBetween(originX, originY, p2x, p2y)\n  let dist3 = distanceBetween(p1x, p1y, p2x, p2y)\n\n  return Math.acos(((dist1 * dist1) + (dist2 * dist2) - (dist3 * dist3)) / (2 * dist1 * dist2))\n}\n","import { drawStoneFloorOn, drawPlayerOn, drawBulletOn, drawBadgeOn, drawSkullOn, drawAmmoOn, drawExplosionOn } from \"./game/engine/Images\";\n\nconst ONE_RADIAN = 2 * Math.PI;\nconst HEIGHT = window.innerHeight\nconst WIDTH = window.innerWidth\n\nexport const GameScreen = {\n    height: HEIGHT,\n    width: WIDTH,\n    center: {x: WIDTH/2, y:HEIGHT/2},\n}\n\nexport class GraphicsHelper {\n\n    constructor(canvases, windowWidth, windowHeight){   \n        this.layers = canvases\n        this.windowHeight = windowHeight\n        this.windowWidth = windowWidth\n        this.layer = 'default'\n        this.setupCanvases(canvases)\n    }\n\n    setupCanvases(canvases){\n        const numberOfCanvases = Object.keys(canvases).length\n        for (let i = 0; i < numberOfCanvases; i++) {\n            this.getContext(Object.keys(canvases)[i]).imageSmoothingEnabled = false\n        }\n    }\n\n    getContext(){\n        return this.layers[this.layer].getContext(\"2d\")\n    }\n\n    drawText(x, y, text, color = \"white\", font = \"30px Arial\"){\n        this.getContext().fillStyle = color;\n        this.getContext().font = font;\n        this.getContext().fillText(text, x, y);\n    }\n\n    setLayer(layerName){\n        this.layer = layerName\n    }\n\n    setTransparency(alpha){\n        this.getContext().globalAlpha = alpha\n    }\n\n    setShadow(shadowValue, color='rgba(0,0,0,0.5)'){\n        this.getContext().shadowColor = color\n        this.getContext().shadowBlur = shadowValue\n    }\n\n    drawCircle(x, y, radius, color){\n        this.getContext().fillStyle = color;\n        this.getContext().beginPath();\n        this.getContext().arc(x, y, radius, 0, ONE_RADIAN);\n        this.getContext().fill();\n        this.getContext().stroke();\n    }\n\n    drawLine(xa, ya, xb, yb, color=\"cyan\"){\n        this.getContext().strokeStyle = color;\n        this.getContext().beginPath();\n        this.getContext().moveTo(xa, ya);\n        this.getContext().lineTo(xb, yb);\n        this.getContext().stroke(); \n    }\n\n    clear(){\n        this.getContext().clearRect(0,0, WIDTH, HEIGHT)\n    }\n    \n    rotate(angle){\n        this.getContext().rotate(angle)\n    }\n    \n    restore(){\n        this.getContext().restore()\n        this.layer = 'default'\n    }\n\n    save(){\n        this.getContext().save()\n    }\n\n    translate(x, y){\n        this.getContext().translate(x, y)\n    }\n\n    drawRect(x, y, w, h, color){\n        this.getContext().fillStyle = color;\n        this.getContext().beginPath();\n        this.getContext().rect(x, y, w, h)\n        this.getContext().fill();\n    }\n\n    drawSquare(x, y, size, color){\n        this.drawRect(x, y, size, size, color)\n    }\n\n    drawSprite(image, x, y, width, height){\n        this.getContext().drawImage(image, x, y, width, height)\n    }\n\n    drawBackground(image, x = 0, y = 0){\n        this.getContext().drawImage(image, x, y)\n    }\n\n    drawPlayer(x, y){\n        drawPlayerOn(this.getContext(), x, y)\n    }\n\n    drawBullet(x, y){\n        drawBulletOn(this.getContext(), x, y)\n    }\n\n    drawBadge(x, y){\n        drawBadgeOn(this.getContext(), x, y)\n    }\n\n    drawSkull(x, y){\n        drawSkullOn(this.getContext(), x, y)\n    }\n\n    drawAmmo(x, y){\n        drawAmmoOn(this.getContext(), x, y)\n    }\n\n    drawExplosion(x, y, frame){\n        drawExplosionOn(this.getContext(), x, y, frame)\n    }\n}\n\nexport function cacheTiledSprite(rows, columns){\n    const cachCanvas = document.createElement('canvas');\n    cachCanvas.width = 40 * rows\n    cachCanvas.height = 40 * columns\n    const context = cachCanvas.getContext('2d', {alpha: false})\n        for (let row = 0; row < rows; row++) {\n            for (let column = 0; column < columns; column++) {\n                drawStoneFloorOn(context, row * 40, column * 40)\n            }\n        }\n    return cachCanvas\n}\n","import _ from \"lodash\"\n\nconst BASE_PARENT = {\n  offsetX: 0,\n  offsetY: 0,\n  name: 'BASE_PARENT'\n}\n\nexport function spawnAtRoot(gameObject){\n  \n}\n\nexport class GameObject {\n\n  constructor(){\n    this.localX = 0\n    this.localY = 0\n    this.parent = BASE_PARENT;\n    this.children = []\n  }\n\n  get name(){\n    return 'GameObject'\n  }\n \n  /**\n   * This should return the x value of where the object is on the screen\n   * @returns {number} the total x offset of this object and all its parent objects (IE its world position)\n   */\n  get offsetX() {\n    return this.localX + this.parent.offsetX\n  }\n\n  /**\n   * This should return the y value of where the object is on the screen\n   * @returns {number} the total y offset of this object and all its parent objects (IE its world position)\n   */\n  get offsetY() {\n    return this.localY + this.parent.offsetY\n  }\n\n  startLoop(graphics){\n    this.start(graphics)\n    this.children.forEach(child => {\n      child.startLoop(graphics)\n    });\n  }\n\n  updateLoop(delta){\n    this.update(delta)\n    this.children.forEach(child => {\n      child.updateLoop(delta)\n    });\n  }\n\n  renderLoop(graphics, delta){\n    this.render(graphics, delta)\n    this.children.forEach(child => {\n      child.renderLoop(graphics, delta)\n    });\n  }\n\n  addChild(gameObject){\n    gameObject.parent = this\n    this.children.push(gameObject);\n  }\n\n  removeChild(gameObject){\n    _.remove(this.children, go => go === gameObject)\n  }\n\n  spawn(gameObject){\n    this.addChild(gameObject)\n    gameObject.start()\n  }\n\n  /**\n   * All this does is remove the game object from the game heirarchy, stopping it from being\n   * updated/rendered every frame.\n   * This does not guarantee the object is ready for garbage collection.\n   * Make sure to clean up any refernces in your object before destroying to \n   * avoid memory leaks.\n   */\n  destroy(){\n    this.parent.removeChild(this)\n  }\n\n  start(){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {number} delta \n   */\n  update(delta){\n\n  }\n\n  /**\n   * Override this method in child objects\n   * @param {GraphicsHelper} graphics The context from the canvas\n   * @param {number} delta \n   */\n  render(graphics, delta) {\n\n  }\n}\n","import { \n  drawHorizontalWallOn, \n  drawVerticalWallOn, \n  drawAngeled1WallOn, \n  drawAngeled2WallOn , \n  drawAngeled3WallOn , \n  drawAngeled4WallOn,  \n  drawStoneFloorOn\n} from \"./Images\";\n\nimport defaultTiles from \"../maps/default2.json\"\n\n/**\n * 0: floor\n * 1: --\n * 2: |\n * 3: -/\n * 4: \\-\n * 5: _\\\n * 6: /_\n */\nexport const tileFunctions = [\n  drawStoneFloorOn,\n  drawHorizontalWallOn,\n  drawVerticalWallOn,\n  drawAngeled1WallOn,\n  drawAngeled2WallOn,\n  drawAngeled3WallOn,\n  drawAngeled4WallOn,\n]\n\nconst TILE_SIZE = 40\n\nexport function cacheLevel() {\n  let canvas = document.createElement('canvas')\n  let context = canvas.getContext('2d', {alpha: false})\n  const mapWidth = defaultTiles[0].length * TILE_SIZE;\n  const mapHeight = defaultTiles.length * TILE_SIZE;\n  const screenHeight = window.innerHeight\n  const screenWidth = window.innerWidth\n\n  canvas.width = mapWidth + screenWidth\n  canvas.height = mapHeight + screenHeight\n\n  context.fillStyle = \"black\";\n  context.beginPath();\n  context.rect(0, 0, canvas.width, canvas.height)\n  context.fill();\n  context.stroke();\n  context.save()\n  drawTilesOn(context, defaultTiles,  screenWidth, screenHeight)\n  return canvas\n}\n\nexport function drawTilesOn(context, tiles, w, h, size=TILE_SIZE){\n  for (let y = 0; y < tiles.length; y++) {\n    const row = tiles[y];\n    for (let x = 0; x < row.length; x++) {\n      const tileIndex = row[x];\n      const xPosition = x * size + w / 2;\n      const yPosition = y * size + h / 2;\n      drawStoneFloorOn(context, xPosition, yPosition)\n      if(tileIndex > 0)\n        tileFunctions[tileIndex](context, xPosition, yPosition)\n      // drawText(context, xPosition,yPosition, `(${x},${y})` )\n      // drawText(context, xPosition + 10,yPosition + 20, `${tiles[y][x]}` )\n    }\n  }\n}\n\nfunction drawText(context, x, y, text, color = \"white\", font = \"10px Arial\"){\n  context.fillStyle = color;\n  context.font = font;\n  context.fillText(text, x, y);\n}","export function keyBinding(value) {\n    let key = {};\n    key.value = value;\n    key.isDown = false;\n    key.isUp = true;\n    key.press = undefined;\n    key.release = undefined;\n    //The `downHandler`\n    key.downHandler = event => {\n      if (event.key === key.value) {\n        if (key.isUp && key.press) key.press();\n        key.isDown = true;\n        key.isUp = false;\n        event.preventDefault();\n      }\n    };\n  \n    //The `upHandler`\n    key.upHandler = event => {\n      if (event.key === key.value) {\n        if (key.isDown && key.release) key.release();\n        key.isDown = false;\n        key.isUp = true;\n        event.preventDefault();\n      }\n    };\n  \n    //Attach event listeners\n    const downListener = key.downHandler.bind(key);\n    const upListener = key.upHandler.bind(key);\n    \n    window.addEventListener(\n      \"keydown\", downListener, false\n    );\n    window.addEventListener(\n      \"keyup\", upListener, false\n    );\n    \n    // Detach event listeners\n    key.unsubscribe = () => {\n      window.removeEventListener(\"keydown\", downListener);\n      window.removeEventListener(\"keyup\", upListener);\n    };\n    \n    return key;\n  }","import mapTiles from \"./maps/default2.json\"\nimport { GameScreen } from \"../GraphicsHelper.js\"\n\nclass MainPlayer {\n  constructor(){\n    \n  }\n}\n\nclass GameState {\n\n  constructor(){\n    this.map = new TileSet()\n    this.player = {\n      x: 20,\n      y: 22,\n      offsetX: 0,\n      offsetY:0,\n      direction: 0,\n      ammo: 6,\n      name: 'Jay Joe',\n    }\n    this.otherPlayers = [\n      new PlayerModel('RagnarRoog', 1040 + GameScreen.center.x, 1040 + GameScreen.center.y)\n    ]\n  }\n\n  updatePlayerPosition(xOffset, yOffset){\n    this.player.offsetX = - xOffset\n    this.player.offsetY = -yOffset\n    let [x, y] = this.map.playerPosition(xOffset, yOffset)\n    this.player.x = x\n    this.player.y = y\n  }\n}\n\n/**\n * The tileSize property describes each tile's \n * width and height (40 x 40)\n */\nclass TileSet {\n  constructor(){\n    this.tiles = mapTiles\n    this.tileSize = 40\n    this.offsets = {x: 0, y: 0}\n  }\n\n  get width(){\n    return this.tiles[0].length\n  }\n\n  get height(){\n    return this.tiles.length\n  }\n\n  tileAt(x, y){\n    return this.tiles[y][x]\n  }\n\n  playerTile(xOffset, yOffset){\n    const [x, y] = this.playerPosition(xOffset, yOffset)\n    return this.tileAt(x, y)\n  }\n\n  playerPosition(xOffset, yOffset){\n    this.offsets.x = xOffset\n    this.offsets.y = yOffset\n    return [Math.floor(-xOffset / this.tileSize), Math.floor(-yOffset / this.tileSize)]\n  }\n\n  tileFromScreenSpace(x, y){\n    let xDiff = Math.floor((GameScreen.center.x - x) / this.tileSize)\n    let yDiff = Math.floor((GameScreen.center.y - y) / this.tileSize)\n\n    const yIndex = state.player.y - yDiff\n    const xIndex = state.player.x - xDiff\n    if(yIndex < 0 || yIndex > this.height || xIndex < 0 ||xIndex > this.width){\n      return -1\n    }\n    return new Tile(xIndex, yIndex, this.tileAt(xIndex, yIndex))\n  }\n}\n\nclass Tile {\n  constructor(x, y, index){\n    this.index = index\n    this.position = {x, y}\n  }\n\n  hit(){}\n}\n\nexport const PLAYER_STATES = {\n  ALIVE: 'ALIVE',\n  DEAD:'DEAD'\n}\n\nclass PlayerModel {\n  constructor(name, x, y){\n    this.state = PLAYER_STATES.ALIVE\n    this.name = name\n    this.x = x\n    this.y = y\n  }\n\n  hit(){\n    this.state = PLAYER_STATES.DEAD\n  }\n}\n\n//refactor this\nexport const state = new GameState()\n\nexport default state\n\n","class MouseInput {\n\n    constructor(){\n        this.x = 0\n        this.y = 0\n        this.clickHandlers = []\n        this.init = this.init.bind(this)\n        this.handleMouseMove = this.handleMouseMove.bind(this)\n        this.handleClick = this.handleClick.bind(this);\n        this.addClickHandler = this.addClickHandler.bind(this);\n    }\n\n    init(){\n        document.onmousemove = this.handleMouseMove\n    }\n\n    handleMouseMove(event){\n        this.x = event.pageX\n        this.y = event.pageY\n    }\n\n    handleClick(event){\n        this.clickHandlers.forEach(handler => {\n            handler(event.clientX, event.clientY)\n        })\n    }\n\n    addClickHandler(handler){\n        this.clickHandlers.push(handler)\n    }\n}\n\nconst instance = new MouseInput()\n\nexport default instance\n","import { GameObject } from \"./engine/GameObject\";\n\nexport class Explosion extends GameObject {\n\n    constructor(x, y){\n        super()\n        this.localX = x\n        this.localY = y\n        this.frameIndex = 0\n        this.frameCount = 4\n    }\n    \n    get name(){\n        return 'Explosion'\n    }\n\n    update(delta){\n        if(this.frameIndex >= this.frameCount){\n            this.parent.removeChild(this)\n        }\n        this.frameIndex++\n    }\n\n    render(graphics){\n        graphics.save()\n        graphics.translate(Math.floor(this.offsetX - 10), Math.floor(this.offsetY -10))\n        graphics.drawExplosion(0,0, this.frameIndex)\n        graphics.restore()\n    }\n}\n","import { state } from \"../../State\"\nimport { distanceBetween } from \"../shapes/Line\"\nimport { GameScreen } from \"../../../GraphicsHelper\"\n\n/**\n * returns all the points on a line between (x0, y0) and (x1, y1)\n * for better performance you can increase the step (defaults to 1)\n * \n * @param {number} x0 \n * @param {number} y0 \n * @param {number} x1 \n * @param {number} y1 \n */\nexport function bresenhamLine(x0, y0, x1, y1){\n    const isSteep = Math.abs(y1, - y0) > Math.abs(x1, x0)\n\n    if(isSteep){\n        let temp = x0\n        x0 = y0\n        y0 = temp\n\n        temp = x1\n        x1 = y1\n        y1 = temp\n    }\n    if(x0 > x1){\n        let temp = x0\n        x0 = x1\n        x1 = temp\n\n        temp = y0\n        y0 = y1\n        y1 = temp\n    }\n\n    const deltaX = x1 - x0,\n        deltaY = Math.abs(y1 - y0),\n        yStep = (y0 < y1) ? 1 : -1,\n        points = []\n\n    let error = 0, y = y0\n\n    for (let x = x0; x <= x1; x++) {\n        isSteep ? points.push([Math.floor(y), Math.floor(x)]) : points.push([Math.floor(x), Math.floor(y)])\n        error += deltaY\n        if(error * 2 >= deltaX){\n            y += yStep\n            error -= deltaX\n        }\n    }\n\n    return points\n}\n\nconst STEP = 1\n\nexport function raycast(startX, startY, endX, endY){\n    let points = bresenhamLine(startX, startY, endX, endY)\n    if(points[0][0] === startX){\n        for (let i = 0; i < points.length; i += STEP) {\n            const [x, y] = points[i];\n            if(state.map.tileFromScreenSpace(x, y) !== 0)\n                return [x, y]\n        }\n    } else {\n        for (let i = points.length - 1; i >= 0; i -= STEP) {\n            const [x, y] = points[i];\n            if(state.map.tileFromScreenSpace(x, y) !== 0)\n                return [x, y]\n        }\n    }\n}\n\n/**\n * \n * @param {number} startX \n * @param {number} startY \n * @param {number} endX \n * @param {number} endY \n * @returns {Array} the result with the x and y coords of the hit\n */\nexport function simpleRaycast(startX, startY, endX, endY){\n    let points = bresenhamLine(startX, startY, endX, endY)\n    for (let i = 0; i < points.length; i += STEP) {\n        const [x, y] = points[i];\n        const wall = hitAWall(x, y)\n        if(wall !== null){\n            return new RaycasResult(wall, x, y)\n        }\n        const player = hitAnotherPlayer(x, y)\n        if(player !== null){\n            return new RaycasResult(player, x, y)\n        }\n    }\n}\n\nfunction hitAWall(xPosition, yPosition){\n    const tile = state.map.tileFromScreenSpace(xPosition, yPosition)\n    return tile.index !== 0 ? tile : null\n}\n\nclass RaycasResult {\n    constructor(object, x, y){\n        this.object = object\n        this.position = {x, y}\n    }\n}\n\nexport function hitAnotherPlayer(xPosition, yPosition){\n    for (let i = 0; i < state.otherPlayers.length; i++) {\n        const eachPlayer = state.otherPlayers[i];\n\n        let playerX = eachPlayer.x + state.map.offsets.x\n        let playerY = eachPlayer.y + state.map.offsets.y\n        if(distanceBetween(xPosition, yPosition, playerX, playerY) <= 50){\n            return eachPlayer\n        }\n    }\n    return null\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { degreesToRadians, rotatePoint } from \"./engine/math/PointMath\";\nimport state from './State'\nimport { Explosion } from \"./Explosion\";\nimport { simpleRaycast } from \"./engine/physics/RayCast\";\n\nconst oneEighty = degreesToRadians(180)\n\nexport class Bullet extends GameObject {\n\n    constructor(x, y, angle, targetX, targetY){\n        super()\n        this.prevX = x\n        this.prevY = y\n        this.localX = x \n        this.localY = y\n        this.distance = 0\n        this.angle = angle - oneEighty\n        this.target = {x: targetX, y: targetY}\n    }\n\n    get name(){\n        return 'Bullet'\n    }\n\n    start(){\n        state.player.ammo -= 1\n        this.maxDistance = 1000\n        this.size = 6\n        this.speed = 20\n        \n        // let result = raycast(this.offsetX, this.offsetY, this.target.x, this.target.y)\n        // if(result){\n        //     alert(result)\n        // }\n    }\n\n    update(delta){\n        this.distance += this.speed * delta\n        if((this.distance) > this.maxDistance) {\n            this.explode(this.localX, this.localY)\n            return\n        }\n\n        let [x, y] =  rotatePoint(this.localX, this.localY, this.localX, this.localY + this.speed * delta, this.angle)\n\n        this.prevX = this.offsetX\n        this.prevY = this.offsetY\n\n        this.localX = Math.floor(x)\n        this.localY = Math.floor(y)\n\n        let result = simpleRaycast(this.prevX, this.prevY, this.offsetX, this.offsetY)\n\n        // if(state.map.tileFromScreenSpace(this.offsetX, this.offsetY) !== 0){\n            if(result){\n            //     let xDelta = result[0] - this.offsetX\n            //     let yDelta = result[1] - this.offsetY\n            // this.parent.spawn(new Explosion(this.localX + xDelta, this.localY + yDelta))\n            result.object.hit()\n            this.explode(this.localX, this.localY)\n        }\n    }\n\n    explode(x, y){\n        this.parent.spawn(new Explosion(x, y))\n        this.destroy()\n    }\n\n    render(graphics){\n        graphics.save()\n        graphics.translate(this.offsetX, this.offsetY)\n        graphics.rotate(this.angle + oneEighty)\n        graphics.drawBullet(0, 0)\n        graphics.restore()\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { GameScreen } from \"../GraphicsHelper\";\n\nconst PanelHeight = Math.floor(GameScreen.height * 0.15);\n\nexport class UIPanels extends GameObject {\n\n    start(){\n        this.rendered = false\n    }\n\n    render(graphics){\n        if(!this.rendered){\n            graphics.setLayer('ui')\n            graphics.drawRect(0,0, GameScreen.width, PanelHeight, \"black\")\n            graphics.drawRect(0,GameScreen.height - PanelHeight, GameScreen.width, PanelHeight, \"black\")\n            graphics.restore()\n            this.rendered = true\n        }\n    }\n}","import { GameObject } from \"./engine/GameObject\";\nimport { cacheLevel } from \"./engine/TiledLevelBuilder\";\nimport { keyBinding } from \"../KeyBinding\";\nimport { state } from './State'\nimport MouseInput from \"./engine/input/MouseInput\"\nimport { Bullet } from \"./Bullet\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport { angleBetween, radiansToDegrees } from \"./engine/math/PointMath\";\nimport { UIPanels } from \"./UIPanels\";\nimport { hitAnotherPlayer } from \"./engine/physics/RayCast\";\n\nconst wKey = keyBinding(\"w\")\nconst aKey = keyBinding(\"a\")\nconst sKey = keyBinding(\"s\")\nconst dKey = keyBinding(\"d\")\n\nconst UI_HEIGHT = Math.floor(GameScreen.height * 0.15);\n\nexport class Level extends GameObject {\n\n  constructor(){\n    super()\n    this.handleMouseClick = this.handleMouseClick.bind(this);\n  }\n\n  get name(){\n    return 'Level'\n  }\n\n  start(){\n    this.speed = 5\n    this.cachedBackground = cacheLevel()\n    this.localX = -state.player.x * state.map.tileSize\n    this.localY = -state.player.y * state.map.tileSize\n    MouseInput.addClickHandler(this.handleMouseClick)\n    state.updatePlayerPosition(this.localX, this.localY)\n  }\n\n  update(delta){\n    let [xMove, yMove] = this.handleKeyboardInput(delta)\n\n    // if(hitAnotherPlayer(GameScreen.center.x + xMove, GameScreen.center.y + yMove)){\n    //   return;\n    // }\n\n    if(xMove !== 0 || yMove !== 0){\n      if(this.canMoveVertically(yMove))\n        this.localY += Math.floor(yMove)\n      if(this.canMoveHorizontally(xMove))\n        this.localX += Math.floor(xMove)\n      state.updatePlayerPosition(this.localX, this.localY)\n    }\n  }\n\n  canMoveVertically(yMove){\n    return state.map.playerTile(this.offsetX, this.offsetY + yMove) === 0 //&&\n      // hitAnotherPlayer(this.offsetX, this.offsetY + yMove) === null\n  }\n\n  canMoveHorizontally(xMove){\n    return state.map.playerTile(this.offsetX + xMove, this.offsetY) === 0 //&&\n      // hitAnotherPlayer(this.offsetX + xMove, this.offsetY) === null\n  }\n\n  handleMouseClick(x, y){\n    if(state.player.ammo > 0){\n      let bulletXPos = -(this.offsetX - GameScreen.center.x)\n      let bulletYPos = -(this.offsetY - GameScreen.center.y)\n      let angle = angleBetween(GameScreen.center.x, GameScreen.center.y , x, y)\n      this.spawn(new Bullet(bulletXPos, bulletYPos, angle, x, y))\n    }\n  }\n\n  render(graphics){\n    graphics.drawBackground(this.cachedBackground, this.offsetX, this.offsetY)\n    // graphics.drawSprite(this.cachedBackground, 0, GameScreen.height - UI_HEIGHT, GameScreen.width, GameScreen.height - this.offsetY)\n    // graphics.drawText(0 ,50, `Player: ${[Math.floor(-1* this.offsetX/40), Math.floor(-1* this.offsetY/40)]}`)\n    // graphics.drawText(0 ,80, `Tile: ${state.map.playerTile(this.offsetX, this.offsetY)}`)\n  }\n\n  handleKeyboardInput(delta){\n    let xMovement = 0, yMovement = 0\n    if(wKey.isDown){\n        yMovement += this.speed * delta\n    }\n    if(sKey.isDown){\n        yMovement -= this.speed * delta\n    }\n    if(aKey.isDown){\n        xMovement += this.speed * delta\n    }\n    if(dKey.isDown){\n        xMovement -= this.speed * delta\n    }\n    return [xMovement, yMovement]\n  }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport state from \"./State\";\n\nconst PLAYER_STATES = {\n  BYSTANDER: 'BYSTANDER', //0\n  MAFIA: 'MAFIA',         //1\n  DETECTIVE: 'DETECTIVE', //2\n}\n\nexport class Player extends GameObject {\n\n  constructor(){\n    super()\n    this.width = 40\n    this.midpoint = this.width/2\n    this.state = PLAYER_STATES.BYSTANDER\n  }\n\n  get name(){\n    return 'Player'\n  }\n\n  start(){\n    this.state = Object.values(PLAYER_STATES)[Math.floor(Math.random() * 3)]\n    this.localX = GameScreen.center.x\n    this.localY = GameScreen.center.y\n  }\n\n  render(graphics){\n    graphics.setLayer('players')\n    graphics.drawText(this.offsetX - 50, this.offsetY - 25, state.player.name, \"cyan\", '15px arial')\n    graphics.drawPlayer(Math.floor(this.offsetX - this.midpoint), Math.floor(this.offsetY - this.midpoint))\n    if(this.state === PLAYER_STATES.MAFIA)\n      graphics.drawSkull(Math.floor(this.offsetX + 10), Math.floor(this.offsetY + 10))\n    if(this.state === PLAYER_STATES.DETECTIVE)\n      graphics.drawBadge(Math.floor(this.offsetX + 10), Math.floor(this.offsetY + 10))\n    graphics.restore()\n  }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { angleBetween, degreesToRadians } from \"./engine/math/PointMath\";\nimport input from './engine/input/MouseInput'\nimport {state} from \"./State\"\nimport { GameScreen } from \"../GraphicsHelper\";\n\nconst VIEW_OFFSET = degreesToRadians(134)\n\nexport class FieldOfVison extends GameObject {\n\n  constructor(){\n    super()\n    this.fovDistance = 1000\n  }\n\n  get name(){\n    return 'FieldOfVison'\n  }\n\n  start(){\n    this.localX = GameScreen.center.x\n    this.localY = GameScreen.center.y\n    this.lookX = 0\n    this.lookY = 0\n    this.angle = 0\n  }\n\n  update(delta){\n    this.angle = angleBetween(this.offsetX, this.offsetY, input.x, input.y)\n    state.player.direction = this.angle\n  }\n\n  /*\n  I should try prerendering the rectangles that make up the blinders. then draw every\n  other pixel in them to create a transparent effect. then draw that as an image.\n  or I could make a transparent blinder sprite and just import and use that.\n  */\n\n  render(graphics){    \n    // graphics.save()\n    // graphics.setLayer('fov')\n    graphics.save()\n    graphics.translate(this.offsetX, this.offsetY)\n    graphics.setTransparency(0.8)\n    // graphics.setShadow(40)\n    graphics.rotate(this.angle - VIEW_OFFSET)\n    graphics.drawRect(-graphics.windowWidth, Math.floor(-(graphics.windowWidth * 1.5)/2), graphics.windowWidth, Math.floor(graphics.windowWidth * 1.5), \"black\")\n    graphics.drawRect(-0, -graphics.windowWidth, graphics.windowWidth, graphics.windowWidth, \"black\")\n    graphics.restore()\n  }\n}","import { GameObject } from \"./GameObject\";\n\nexport class FPSView extends GameObject {\n\n  start(){\n    this.localY = 25\n    this.frameCount = 0\n    this.fps = 0\n    this.color = \"white\"\n    setInterval(() => {\n      this.fps = this.frameCount\n      this.frameCount = 0\n    }, 1000)\n  }\n\n  render(graphics){\n    this.frameCount++\n    graphics.setLayer('ui')\n    graphics.drawRect(0, 0, 110, 30, \"black\")\n\n    graphics.drawText(this.offsetX ,this.offsetY, `FPS: ${this.fps}`, this.color)\n    graphics.restore()\n  }\n}","import { GameObject } from \"./engine/GameObject\";\nimport { keyBinding } from \"../KeyBinding\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport state from \"./State\";\n\nconst rKey = keyBinding(\"r\")\n\nexport class Ammo extends GameObject {\n\n    start(){\n        this.localY = GameScreen.height - 75\n        this.localX = 25\n    }\n    \n    update(delta){\n        if(rKey.isDown){\n            state.player.ammo = 6\n        }\n    }\n\n    render(graphics){\n        graphics.setLayer('ui')\n        graphics.setTransparency(0.15)\n        graphics.drawRect(this.offsetX, this.offsetY, 6 * 32, 40, \"black\")\n        graphics.setTransparency(1)\n        for (let i = 0; i < state.player.ammo; i++) {\n            graphics.drawAmmo(this.offsetX + i * 30, this.offsetY)\n        }\n        graphics.restore()\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport state from \"./State\";\nimport { GameScreen } from \"../GraphicsHelper\";\n\nexport class MiniMap extends GameObject {\n\n    constructor(){\n        super()\n        this.dotSize = 2\n    }\n\n    get name(){\n        return 'MiniMap'\n    }\n\n    start(){\n        this.image = this.renderMiniMap()\n        this.localX = GameScreen.width - 125\n        this.localY = GameScreen.height - 125\n    }\n\n    render(graphics){\n        graphics.setLayer('ui')\n        graphics.save()\n        graphics.translate(this.offsetX, this.offsetY)\n        graphics.drawSprite(this.image, 0,0, this.image.width, this.image.height)\n        graphics.drawRect(\n            this.dotSize * state.player.x,\n            this.dotSize * state.player.y,\n            4, 4,\n            \"magenta\"\n        )\n        graphics.restore()\n    }\n\n    renderMiniMap(){\n        const tileMap = state.map\n        const mapImage = document.createElement('canvas')\n        mapImage.width = tileMap.width * this.dotSize\n        mapImage.height = tileMap.height * this.dotSize\n        const context = mapImage.getContext('2d')\n        for (let y = 0; y < tileMap.height; y++) {\n            for (let x = 0; x < tileMap.width; x++) {\n                if(tileMap.tileAt(x, y) === 0){\n                    drawRect(context, x * this.dotSize, y * this.dotSize, this.dotSize, this.dotSize, \"black\")\n                } else {\n                    drawRect(context, x * this.dotSize, y * this.dotSize, this.dotSize, this.dotSize, \"green\")\n                }\n            }\n        }\n        return mapImage\n    }\n}\n\nfunction drawRect(context, x, y, w, h, color) {\n    context.fillStyle = color;\n    context.beginPath();\n    context.rect(x, y, w, h)\n    context.fill();\n}","import { GameObject } from \"../GameObject\";\nimport { getCache } from \"../Images\";\n\nexport class CacheView extends GameObject{\n\n  constructor(){\n    super()\n    this.rendered = false\n  }\n\n  render(graphics){\n    if(!this.rendered){\n      graphics.setLayer('ui')\n      graphics.getContext().drawImage(getCache(), 0, 40)\n      graphics.restore()\n      this.rendered = true\n    }\n  }\n}","import { GameObject } from \"./engine/GameObject\";\nimport state, { PLAYER_STATES } from \"./State\";\nimport { degreesToRadians, angleFromPoints } from \"./engine/math/PointMath\";\nimport { GameScreen } from \"../GraphicsHelper\";\nimport input from './engine/input/MouseInput'\nimport { distanceBetween } from \"./engine/shapes/Line\";\n\nconst minViewableAngle = degreesToRadians(-45)\nconst maxViewableAngle = degreesToRadians(45)\n\nexport default class OtherPlayers extends GameObject {\n\n    constructor(){\n        super()\n        this.playerMap = {}\n    }\n\n    name(){\n        return 'OtherPlayers'\n    }\n\n    start(){\n        //spawn all the players\n        state.otherPlayers.forEach(eachOtherPlayer => {\n            this.spawn(new Frenemy(eachOtherPlayer))\n        });\n    }\n}\n\nclass Frenemy extends GameObject {\n\n    constructor(otherPlayer){\n        super()\n        this.player = otherPlayer\n    }\n\n    name(){\n        return 'Frenemy'\n    }\n\n    updatePosition(){\n        /*\n        the state.map.offsets will always be negative, \n        */\n        this.localX = this.player.x + state.map.offsets.x\n        this.localY = this.player.y + state.map.offsets.y\n    }\n\n    start(){\n        this.updatePosition()\n    }\n\n    update(delta){\n        this.updatePosition()\n    }\n\n    get color(){\n        return this.player.state === PLAYER_STATES.ALIVE ? \"cyan\" : \"white\"\n    }\n\n    visibleToPlayer(){\n        let angle = angleFromPoints(GameScreen.center.x, GameScreen.center.y, this.offsetX, this.offsetY, input.x, input.y)\n        const distanceToPlayer = distanceBetween(this.offsetX, this.offsetY, GameScreen.center.x, GameScreen.center.y)\n        return angle > minViewableAngle && angle < maxViewableAngle || distanceToPlayer <= 70\n    }\n    \n    render(graphics){\n        if(this.visibleToPlayer()){\n            graphics.setLayer('players')\n            graphics.drawText(this.offsetX - 50, this.offsetY - 25, this.player.name, \"red\", '15px arial')\n            graphics.drawRect(this.offsetX - 20, this.offsetY - 20, 40, 40, this.color)\n            graphics.restore()\n        }\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\n\nexport class ScreenWipe extends GameObject {\n\n    constructor(){\n        super()\n        this.layer = 'default'\n    }\n\n    render(graphics){\n        graphics.setLayer(this.layer)\n        graphics.clear()\n        graphics.restore()\n    }\n}","import React, {Component} from 'react'\nimport { GraphicsHelper } from '../GraphicsHelper'\nimport { init } from '../game'\nimport MouseInput from '../game/engine/input/MouseInput'\nimport { load } from '../game/engine/Images'\nimport spritesheet from \"../res/sprite-sheet.png\"\n\nconst FRAME_INTERVAL = 1000 / 30 //30 fps\nconst HEIGHT = window.innerHeight\nconst WIDTH = window.innerWidth\n\nexport class Canvas extends Component {\n\n    constructor(){\n        super()\n        this.lastFrameTime = 0\n        this.loop = this.loop.bind(this);\n        this.game = init()\n    }\n\n    loop(time){\n        const elapsedFrameTime = time - this.lastFrameTime;\n        const deltaTime = FRAME_INTERVAL / elapsedFrameTime;\n        this.game.updateLoop(deltaTime)\n        this.game.renderLoop(this.g, deltaTime)\n        this.lastFrameTime = time\n        requestAnimationFrame(this.loop); \n    }\n\n    componentDidMount(){\n        let canvases = {\n            default: this.refs.defaultCanvas, \n            fov: this.refs.fovCanvas,\n            players: this.refs.playerCanvas,\n            ui: this.refs.uiCanvas\n        }\n        this.refs.uiCanvas.addEventListener('contextmenu', e => e.preventDefault())\n        this.g = new GraphicsHelper(canvases, WIDTH, HEIGHT)\n        this.g.drawText(WIDTH/2, HEIGHT/2, \"LOADING...\", \"white\")\n        MouseInput.init()\n        load(spritesheet).then(() => {\n            this.game.startLoop(this.g)\n            requestAnimationFrame(this.loop);\n        })\n    }\n\n    render() { \n        return (\n            <>\n                <canvas ref=\"defaultCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"fovCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"playerCanvas\" width={WIDTH} height={HEIGHT}></canvas>\n                <canvas ref=\"uiCanvas\" width={WIDTH} height={HEIGHT} onClick={MouseInput.handleClick}></canvas>\n            </>\n        )\n    }\n}\n","import { GameObject } from \"./engine/GameObject\";\nimport { Level } from \"./Level\";\nimport { Player } from \"./Player\";\nimport { FieldOfVison } from \"./FieldOfVison\";\nimport { FPSView } from \"./engine/FPSView\";\nimport { Ammo } from \"./Ammo\";\nimport { MiniMap } from \"./MiniMap\";\nimport { UIPanels } from \"./UIPanels\";\n\nimport { CacheView } from \"./engine/debug/CacheView\";\nimport { getCache } from \"./engine/Images\";\nimport OtherPlayers from \"./OtherPlayers\";\nimport { ScreenWipe } from \"./ScreenWipe\";\n\n\nexport function init(){\n  const root = new GameObject()\n  const player = new Player()\n  const fpsView = new FPSView();\n  const uiPanels = new UIPanels();\n  const playerScreenWipe = new ScreenWipe()\n  playerScreenWipe.layer = 'players'\n\n  uiPanels.addChild(fpsView)\n  uiPanels.addChild(new Ammo())\n  uiPanels.addChild(new MiniMap())\n  \n  root.addChild(new Level())\n  root.addChild(new FieldOfVison())\n  root.addChild(playerScreenWipe)\n  root.addChild(player)\n  root.addChild(new OtherPlayers())\n  root.addChild(uiPanels)\n  // root.addChild(new CacheView(getCache()))\n  return root\n}\n","import React, {Component} from \"react\"\nimport { drawTilesOn, tileFunctions } from \"../game/engine/TiledLevelBuilder\";\nimport { load } from \"../game/engine/Images\";\nimport spritesheet from \"../res/sprite-sheet.png\"\nimport './styles/LevelEdit.scss'\nimport defaultTiles from \"../game/maps/default2.json\"\nimport {state} from \"../game/State\"\n\nconst CANVAS_WIDTH = 52*40\nconst CANVAS_HEIGHT = 52*40\n\nexport default class LevelEdit extends Component {\n    constructor(){\n        super()\n        this.state = {\n            tiles: defaultTiles,\n            images: [],\n            currentBrush: 1\n        }\n        this.handlePaint = this.handlePaint.bind(this);\n        this.updateBrush = this.updateBrush.bind(this);\n        this.saveMap = this.saveMap.bind(this);\n    }\n\n    componentDidMount(){\n        load(spritesheet).then(() => {\n            this.renderTiles()\n\n            tileFunctions.forEach(fn => {\n                const newCanvas = document.createElement('canvas');\n                newCanvas.width=state.map.tileSize\n                newCanvas.height=state.map.tilesize\n                newCanvas.className='brush'\n                newCanvas.onclick = () => {this.updateBrush(tileFunctions.indexOf(fn))}\n                fn(newCanvas.getContext('2d'), 0, 0)\n                this.refs.pallet.appendChild(newCanvas)\n            })\n        })\n    }\n\n    updateBrush(index){\n        this.setState({...this.state, currentBrush: index})\n    }\n\n    renderTiles(){\n        const canvas = this.refs.levelCanvas;\n        drawTilesOn(canvas.getContext(\"2d\"), this.state.tiles, 0, 0)\n    }\n\n    componentDidUpdate(){\n        this.renderTiles()\n    }\n\n    handlePaint({pageX, pageY}){\n        const {offsetLeft, offsetTop, offsetWidth} = this.refs.levelCanvas;\n        const tileWidth = offsetWidth / 52\n        const xCoord = Math.floor([(pageX - offsetLeft) / tileWidth]);\n        const yCoord = Math.floor([(pageY - offsetTop) / tileWidth]);\n        let tiles = [...this.state.tiles]\n        tiles[yCoord][xCoord] = this.state.currentBrush\n        this.setState({tiles})\n    }\n\n    saveMap(){\n        console.log(this.state.tiles)\n    }\n\n    render(){\n        return(\n            <div className='level-edit-container'>\n            <div ref='pallet' className='pallet'></div>\n                <canvas \n                    onClick={this.handlePaint}\n                    className='level-canvas' \n                    style={{position: 'relative'}} \n                    ref=\"levelCanvas\" width={CANVAS_WIDTH} height={CANVAS_HEIGHT}\n                />\n                <button onClick={this.saveMap}>Save</button>\n            </div>\n        )\n    }\n}\n\n","import React from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n  } from \"react-router-dom\";\nimport { Canvas } from \"./Canvas\";\nimport LevelEdit from \"./LevelEdit\";\n\nconst Routes = (props) => {\n    return(\n        <Router>\n            <Switch>\n                <Route path=\"/level-edit\">\n                    <LevelEdit />\n                </Route>\n                <Route path=\"/\">\n                    <Canvas/>\n                </Route>\n            </Switch>\n        </Router>\n    )\n}\n\nexport default Routes;\n","import React from 'react';\nimport './App.css';\nimport Routes from './components/Routes';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Routes/>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}